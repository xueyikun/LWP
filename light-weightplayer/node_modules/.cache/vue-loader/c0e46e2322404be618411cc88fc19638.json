{"remainingRequest":"D:\\GH\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GH\\LWP\\light-weightplayer\\src\\components\\bottomControl\\BottomControl.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GH\\LWP\\light-weightplayer\\src\\components\\bottomControl\\BottomControl.vue","mtime":1636677514743},{"path":"D:\\GH\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\GH\\node_modules\\babel-loader\\lib\\index.js","mtime":1636408357214},{"path":"D:\\GH\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\GH\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGhhbmRsZU11c2ljVGltZSwgcmV0dXJuU2Vjb25kIH0gZnJvbSAicGx1Z2lucy91dGlscyI7CmxldCBsYXN0U2Vjb25kID0gMDsKLy8g5oC75pe26ZW/55qE56eS5pWwCmxldCBkdXJhdGlvbk51bSA9IDA7Ci8vIOS/neWtmOW9k+WJjemfs+mHjwpsZXQgdm9sdW1lU2F2ZSA9IDA7Ci8vIOW9k+WJjemfs+S5kOexu+Wei++8jOeUqOS6juS4i+i9vQpsZXQgbXVzaWNUeXBlID0gIiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJvdHRvbUNvbnRyb2wiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtdXNpY0RldGFpbDoge30sCiAgICAgIG11c2ljVXJsOiAiIiwKICAgICAgbXVzaWNMaXN0OiBbXSwKICAgICAgY3VycmVudE11c2ljSW5kZXg6IDAsCiAgICAgIGRyYXdlcjogZmFsc2UsCiAgICAgIC8vIOmfs+S5kOaAu+aXtumVvwogICAgICBkdXJhdGlvbjogIjAwOjAwIiwKICAgICAgLy8g5b2T5YmN5pKt5pS+5pe26Ze05L2N572uCiAgICAgIGN1cnJlbnRUaW1lOiAwLAogICAgICAvLyDov5vluqbmnaHnmoTkvY3nva4KICAgICAgdGltZVByb2dyZXNzOiAwLAogICAgICAvLyDpn7Pph48KICAgICAgdm9sdW1lOiAzMCwKICAgICAgLy8g5piv5ZCm6Z2Z6Z+zCiAgICAgIGlzTXV0ZWQ6IGZhbHNlLAogICAgICAvLyDmir3lsYnmmK/lkKbooqvmiZPlvIDov4fvvIjlpoLmnpzmsqHmiZPlvIDov4fvvIzph4zpnaLnmoTmlbDmja7mmK/kuI3kvJrmuLLmn5PnmoTvvIkKICAgICAgaGFzRHJhd2VyT3BlbmQ6IGZhbHNlLAogICAgICAvLyDnlKjmiLfnmoTllpzmrKLpn7PkuZDliJfooagKICAgICAgbGlrZU11aXNjTGlzdDogW10sCiAgICAgIC8vIOeUqOaIt+aYr+WQpuWWnOasouW9k+WJjemfs+S5kAogICAgICBpc1VzZXJMaWtlQ3VycmVudE11c2ljOiBmYWxzZSwKICAgICAgLy8g5pKt5pS+5qih5byP77yI6aG65bqP5pKt5pS+77yM6ZqP5py65pKt5pS+77yJCiAgICAgIC8vIG9yZGVyIHJhbmRvbQogICAgICBwbGF5VHlwZTogIm9yZGVyIiwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDor7fmsYIKICAgIC8vIOivt+axguatjOabsueahHVybAogICAgYXN5bmMgZ2V0TXVzaWNEZXRhaWwoaWQpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXNpY0xvYWRTdGF0ZSIsIHRydWUpOwogICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kcmVxdWVzdCgiL3NvbmcvdXJsIiwgeyBpZCB9KTsKICAgICAgLy8gY29uc29sZS5sb2cobXVzaWNEZXRhaWwpOwogICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAvLyDojrflj5bkuI3liLB1cmwKICAgICAgaWYgKHJlc3VsdC5kYXRhLmRhdGFbMF0udXJsID09IG51bGwpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor6XmrYzmm7LmmoLml6DniYjmnYPvvIzlsIbkuLrmgqjmkq3mlL7kuIvkuIDpppbmrYzmm7IiKTsKICAgICAgICB0aGlzLmNoYW5nZU11c2ljKCJuZXh0Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubXVzaWNVcmwgPSByZXN1bHQuZGF0YS5kYXRhWzBdLnVybDsKICAgICAgbXVzaWNUeXBlID0gcmVzdWx0LmRhdGEuZGF0YVswXS50eXBlLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlTXVzaWNMb2FkU3RhdGUiLCBmYWxzZSk7CiAgICB9LAogICAgLy8g5Zac5qyi6K+l6Z+z5LmQCiAgICAvLyBsaWtl5Y+C5pWwOuaYr+WQpuWWnOasouivpemfs+S5kAogICAgYXN5bmMgbGlrZU11c2ljKGlkLCBsaWtlKSB7CiAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRyZXF1ZXN0KCIvbGlrZSIsIHsgaWQsIGxpa2UgfSk7CiAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgIGNvbnNvbGUubG9nKCLllpzmrKLmk43kvZzmiJDlip8iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygi5Zac5qyi5pON5L2c5aSx6LSlIik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5bllpzmrKLpn7PkuZDliJfooagKICAgIGFzeW5jIGdldExpa2VNdXNpY0xpc3QoKSB7CiAgICAgIC8vIOiOt+WPluaXtumXtOaIswogICAgICB2YXIgdGltZXN0YW1wID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTsKICAgICAgLy8g5Zug5Li65Zac5qyi6Z+z5LmQ5YiX6KGo5a6e5pe25oCn6L6D6auY77yM5Li65LqG6YG/5YWN5o6l5Y+j57yT5a2Y77yM5Zyo6K+35rGC5ZCO6Z2i5Yqg5LiK5LiA5Liq5pe26Ze05oizCiAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRyZXF1ZXN0KCIvbGlrZWxpc3QiLCB7CiAgICAgICAgdWlkOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpLAogICAgICAgIHRpbWVzdGFtcCwKICAgICAgfSk7CiAgICAgIHRoaXMubGlrZU11aXNjTGlzdCA9IHJlcy5kYXRhLmlkczsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGFMaWtlTXVpc2NMaXN0IiwgdGhpcy5saWtlTXVpc2NMaXN0KTsKICAgIH0sCgogICAgLy8g54K55Ye75pKt5pS+6ZSu55qE5Zue6LCDCiAgICBjaGFuZ2VQbGF5U3RhdGUoKSB7CiAgICAgICF0aGlzLiRzdG9yZS5zdGF0ZS5pc1BsYXkgPyB0aGlzLnBsYXlNdXNpYygpIDogdGhpcy5wYXVzZU11c2ljKCk7CiAgICB9LAogICAgLy8g5pKt5pS+6Z+z5LmQ55qE5Ye95pWwCiAgICBwbGF5TXVzaWMoKSB7CiAgICAgIHRoaXMuJHJlZnMuYXVkaW9QbGF5ZXIucGxheSgpOwogICAgfSwKICAgIC8vIOaaguWBnOmfs+S5kOeahOWHveaVsAogICAgcGF1c2VNdXNpYygpIHsKICAgICAgdGhpcy4kcmVmcy5hdWRpb1BsYXllci5wYXVzZSgpOwogICAgfSwKICAgIC8vIGF1ZGlv5byA5aeL5oiW5pqC5YGc5pKt5pS+55qE5Zue6LCDICDlnKh2dWV45Lit5pS55Y+Y54q25oCBCiAgICBjaGFuZ2VTdGF0ZShzdGF0ZSkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImNoYW5nZVBsYXlTdGF0ZSIsIHN0YXRlKTsKICAgIH0sCiAgICAvLyDmoLnmja5pZOaJvuWIsCBtdXNpY0xpc3TkuK3lr7nlupTnmoRtdXNpY0RldGFpbAogICAgZ2V0TXVzaWNEZXRhaWxGcm9tTXVzaWNMaXN0KCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLm11c2ljTGlzdC5maW5kSW5kZXgoCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0uaWQgPT0gdGhpcy4kc3RvcmUuc3RhdGUubXVzaWNJZAogICAgICApOwogICAgICBjb25zb2xlLmxvZyhpbmRleCk7CiAgICAgIGlmIChpbmRleCAhPSAtMSkgewogICAgICAgIC8vIOiusOW9leW9k+WJjemfs+S5kOeahGluZGV4CiAgICAgICAgdGhpcy5jdXJyZW50TXVzaWNJbmRleCA9IGluZGV4OwogICAgICAgIC8vIOWwhue0ouW8leS8oOiHs3Z1ZXgKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUN1cnJlbnRJbmRleCIsIGluZGV4KTsKICAgICAgICB0aGlzLm11c2ljRGV0YWlsID0gdGhpcy5tdXNpY0xpc3RbaW5kZXhdOwogICAgICAgIC8vIOebtOaOpeS7jmF1ZGlv5qCH562+5Lit55qEZHVyYXRpb27lsZ7mgKfmi7/ml7bplb/kvJrmnInor7fmsYLml7blt67pl67popjvvIzmiYDku6Xnm7TmjqXlnKhtdXNpY0luZm/kuK3mi78KICAgICAgICB0aGlzLmR1cmF0aW9uID0gdGhpcy5tdXNpY0xpc3RbaW5kZXhdLmR0OwogICAgICB9CiAgICB9LAogICAgLy8g5YiH5q2M5Ye95pWwCiAgICBjaGFuZ2VNdXNpYyh0eXBlLCBpZCkgewogICAgICBpZiAodHlwZSA9PSAiY2xpY2siKSB7CiAgICAgICAgLy8g54K55Ye75oq95bGJcm936L+b6KGM5YiH5q2MCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXNpY0lkIiwgaWQpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInByZSIpIHsKICAgICAgICBsZXQgY3VycmVudE11c2ljSW5kZXggPSB0aGlzLmN1cnJlbnRNdXNpY0luZGV4OwogICAgICAgIGxldCBwcmVJbmRleDsKICAgICAgICBpZiAodGhpcy5wbGF5VHlwZSA9PSAib3JkZXIiKSB7CiAgICAgICAgICBwcmVJbmRleCA9CiAgICAgICAgICAgIGN1cnJlbnRNdXNpY0luZGV4IC0gMSA8IDAKICAgICAgICAgICAgICA/IHRoaXMubXVzaWNMaXN0Lmxlbmd0aCAtIDEKICAgICAgICAgICAgICA6IGN1cnJlbnRNdXNpY0luZGV4IC0gMTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheVR5cGUgPT0gInJhbmRvbSIpIHsKICAgICAgICAgIGlmICh0aGlzLm11c2ljTGlzdC5sZW5ndGggPT0gMSkgewogICAgICAgICAgICBwcmVJbmRleCA9IGN1cnJlbnRNdXNpY0luZGV4OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwKTsg5Y+v5Z2H6KGh6I635Y+WMOWIsDnnmoTpmo/mnLrmlbTmlbDjgIIKICAgICAgICAgICAgcHJlSW5kZXggPSBjdXJyZW50TXVzaWNJbmRleDsKICAgICAgICAgICAgd2hpbGUgKHByZUluZGV4ID09IGN1cnJlbnRNdXNpY0luZGV4KSB7CiAgICAgICAgICAgICAgcHJlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLm11c2ljTGlzdC5sZW5ndGgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubXVzaWNMaXN0W3ByZUluZGV4XS5pZCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXNpY0lkIiwgdGhpcy5tdXNpY0xpc3RbcHJlSW5kZXhdLmlkKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJuZXh0IikgewogICAgICAgIGxldCBjdXJyZW50TXVzaWNJbmRleCA9IHRoaXMuY3VycmVudE11c2ljSW5kZXg7CiAgICAgICAgbGV0IG5leHRJbmRleDsKICAgICAgICBpZiAodGhpcy5wbGF5VHlwZSA9PSAib3JkZXIiKSB7CiAgICAgICAgICBuZXh0SW5kZXggPQogICAgICAgICAgICBjdXJyZW50TXVzaWNJbmRleCArIDEgPT0gdGhpcy5tdXNpY0xpc3QubGVuZ3RoCiAgICAgICAgICAgICAgPyAwCiAgICAgICAgICAgICAgOiBjdXJyZW50TXVzaWNJbmRleCArIDE7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXlUeXBlID09ICJyYW5kb20iKSB7CiAgICAgICAgICBpZiAodGhpcy5tdXNpY0xpc3QubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgbmV4dEluZGV4ID0gY3VycmVudE11c2ljSW5kZXg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTApOyDlj6/lnYfooaHojrflj5Yw5YiwOeeahOmaj+acuuaVtOaVsOOAggogICAgICAgICAgICBuZXh0SW5kZXggPSBjdXJyZW50TXVzaWNJbmRleDsKICAgICAgICAgICAgd2hpbGUgKG5leHRJbmRleCA9PSBjdXJyZW50TXVzaWNJbmRleCkgewogICAgICAgICAgICAgIG5leHRJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubXVzaWNMaXN0Lmxlbmd0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tdXNpY0xpc3RbbmV4dEluZGV4XS5pZCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXNpY0lkIiwgdGhpcy5tdXNpY0xpc3RbbmV4dEluZGV4XS5pZCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlj4zlh7vmir3lsYnliJfooajkuK3nmoRyb3fnmoTlm57osIMKICAgIGNsaWNrUm93KHJvdykgewogICAgICAvLyBjb25zb2xlLmxvZyhyb3cuaWQpOwogICAgICB0aGlzLmNoYW5nZU11c2ljKCJjbGljayIsIHJvdy5pZCk7CiAgICB9LAogICAgLy8g5b2T5YmN5pKt5pS+5pe26Ze05L2N572uCiAgICB0aW1ldXBkYXRlKCkgeyAgICAgCiAgICAgIGxldCB0aW1lID0gdGhpcy4kcmVmcy5hdWRpb1BsYXllci5jdXJyZW50VGltZTsKICAgICAgLy8g5bCG5b2T5YmN5pKt5pS+5pe26Ze05L+d5a2Y5YiwdnVleCAg5aaC5p6c5L+d5a2Y5YiwdnVleOi/meatpeiKgua1gSzkvJrlr7zoh7TmrYzor43kuI3nsr7lh4Ys6K+v5beu5pyA5aSn5pyJMXMKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDdXJyZW50VGltZSIsIHRpbWUpOwoKICAgICAgdGltZSA9IE1hdGguZmxvb3IodGltZSk7CiAgICAgIGlmICh0aW1lICE9PSBsYXN0U2Vjb25kKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codGltZSk7CiAgICAgICAgbGFzdFNlY29uZCA9IHRpbWU7CiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHRpbWU7CiAgICAgICAgLy8g6K6h566X6L+b5bqm5p2h55qE5L2N572uCiAgICAgICAgdGhpcy50aW1lUHJvZ3Jlc3MgPSBNYXRoLmZsb29yKCh0aW1lIC8gZHVyYXRpb25OdW0pICogMTAwKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRpbWVQcm9ncmVzcyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmi5bliqjov5vluqbmnaHnmoTlm57osIMKICAgIGNoYW5nZVByb2dyZXNzKGUpIHsKICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgIC8vIOS/ruaUueW9k+WJjeaSreaUvuaXtumXtAogICAgICB0aGlzLmN1cnJlbnRUaW1lID0gTWF0aC5mbG9vcigoZSAvIDEwMCkgKiBkdXJhdGlvbk51bSk7CiAgICAgIC8vIOaUueWPmGF1ZGlv55qE5a6e6ZmF5b2T5YmN5pKt5pS+5pe26Ze0CiAgICAgIHRoaXMuJHJlZnMuYXVkaW9QbGF5ZXIuY3VycmVudFRpbWUgPSB0aGlzLmN1cnJlbnRUaW1lOwogICAgfSwKICAgIC8vIOaLluWKqOmfs+mHj+adoeeahOWbnuiwgwogICAgY2hhbmdlVm9sdW1lKGUpIHsKICAgICAgLy8g5pS55Y+YYXVkaW/nmoTpn7Pph48KICAgICAgLy8gaW5wdXTkuovku7Yg5a6e5pe26Kem5Y+RCiAgICAgIHRoaXMuJHJlZnMuYXVkaW9QbGF5ZXIudm9sdW1lID0gZSAvIDEwMDsKICAgICAgaWYgKHRoaXMuaXNNdXRlZCAmJiBlID4gMCkgewogICAgICAgIHRoaXMuaXNNdXRlZCA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKGUgPT0gMCAmJiB0aGlzLmlzTXV0ZWQgPT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmlzTXV0ZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy8g54K55Ye75bCP5ZaH5Y+t55qE5Zue6LCDIO+8iOWIh+aNoumdmemfs+eKtuaAge+8iQogICAgY2hhbmdlTXV0ZWRTdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuaXNNdXRlZCkgewogICAgICAgIHRoaXMudm9sdW1lID0gdm9sdW1lU2F2ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2b2x1bWVTYXZlID0gdGhpcy52b2x1bWU7CiAgICAgICAgdGhpcy52b2x1bWUgPSAwOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHZvbHVtZVNhdmUsIHRoaXMuaXNNdXRlZCk7CiAgICAgIHRoaXMuaXNNdXRlZCA9ICF0aGlzLmlzTXV0ZWQ7CiAgICB9LAogICAgLy8g5pON5L2cZHJhd2VyTGlzdOS4rURPTeeahOWHveaVsAogICAgaGFuZGxlRHJhd2VyTGlzdERPTShjdXJyZW50SW5kZXgsIGxhc3RJbmRleCkgewogICAgICAvL+aTjeS9nOWOn+eUn0RPTQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IHRhYmxlUm93cyA9IGRvY3VtZW50CiAgICAgICAgICAucXVlcnlTZWxlY3RvcigiLmJvdHRvbUNvbnRyb2wiKQogICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoIi5lbC10YWJsZV9fcm93Iik7CiAgICAgICAgLy8gLy8g55u05o6l5L+u5pS5ZG9t5qC35byP55qE6aKc6Imy5peg5pWIICDlj6/og73mmK/lm6DkuLrnrKzkuInmlrnnu4Tku7Ygc3R5bGUgc2NvcGVk55qE5Y6f5ZugCiAgICAgICAgLy8gLy8g6YCa6L+H5byV5YWl5YWo5bGA5qC35byP6Kej5YazCiAgICAgICAgaWYgKHRhYmxlUm93c1tjdXJyZW50SW5kZXhdKSB7CiAgICAgICAgICB0YWJsZVJvd3NbY3VycmVudEluZGV4XS5jaGlsZHJlblswXQogICAgICAgICAgICAucXVlcnlTZWxlY3RvcigiLmNlbGwiKQogICAgICAgICAgICAuY2xhc3NMaXN0LmFkZCgiY3VycmVudFJvdyIpOwogICAgICAgICAgdGFibGVSb3dzW2N1cnJlbnRJbmRleF0uY2hpbGRyZW5bMV0KICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoIi5jZWxsIikKICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoImN1cnJlbnRSb3ciKTsKICAgICAgICB9CiAgICAgICAgaWYgKAogICAgICAgICAgKGxhc3RJbmRleCAmJiBsYXN0SW5kZXggIT0gLTEgJiYgdGFibGVSb3dzW2xhc3RJbmRleF0pIHx8CiAgICAgICAgICBsYXN0SW5kZXggPT0gMAogICAgICAgICkgewogICAgICAgICAgLy8g5bCG5LiK5LiA6aaW55qE57G75ZCN5Yig5o6JCiAgICAgICAgICB0YWJsZVJvd3NbbGFzdEluZGV4XS5jaGlsZHJlblswXQogICAgICAgICAgICAucXVlcnlTZWxlY3RvcigiLmNlbGwiKQogICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgiY3VycmVudFJvdyIpOwogICAgICAgICAgdGFibGVSb3dzW2xhc3RJbmRleF0uY2hpbGRyZW5bMV0KICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoIi5jZWxsIikKICAgICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoImN1cnJlbnRSb3ciKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeCueWHu+aJk+W8gOaKveWxieeahOWbnuiwgwogICAgb3BlbkRyYXdlcigpIHsKICAgICAgLy8g5YWz6Zet5Lmf5piv6L+Z5Liq5Zue6LCD77yM5omA5Lul55u05o6l5Y+W5Y+NCiAgICAgIHRoaXMuZHJhd2VyID0gIXRoaXMuZHJhd2VyOwogICAgICB0aGlzLmhhc0RyYXdlck9wZW5kID0gdHJ1ZTsKICAgICAgdGhpcy5oYW5kbGVEcmF3ZXJMaXN0RE9NKHRoaXMuY3VycmVudE11c2ljSW5kZXgpOwogICAgfSwKCiAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbllpzmrKLor6Xpn7PkuZAKICAgIGdldElzVXNlckxpa2VDdXJyZW50TXVzaWMoKSB7CiAgICAgIHRoaXMuaXNVc2VyTGlrZUN1cnJlbnRNdXNpYyA9IHRoaXMubGlrZU11aXNjTGlzdC5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtID09IHRoaXMuJHN0b3JlLnN0YXRlLm11c2ljSWQKICAgICAgKTsKICAgIH0sCiAgICAvLyDnlKjmiLfngrnlh7vllpzmrKLor6Xpn7PkuZDnmoTlm57osIMKICAgIGFzeW5jIGxpa2VJdCgpIHsKICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS5pc0xvZ2luKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35YWI55m75b2VISIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmlzVXNlckxpa2VDdXJyZW50TXVzaWMgPSAhdGhpcy5pc1VzZXJMaWtlQ3VycmVudE11c2ljOwogICAgICBhd2FpdCB0aGlzLmxpa2VNdXNpYygKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5tdXNpY0lkLAogICAgICAgIHRoaXMuaXNVc2VyTGlrZUN1cnJlbnRNdXNpYwogICAgICApOwogICAgICBhd2FpdCB0aGlzLmdldExpa2VNdXNpY0xpc3QoKTsKICAgIH0sCgogICAgLy8g54K55Ye75LiL6L295oyJ6ZKu55qE5Zue6LCDCiAgICBkb3dubG9hZEN1cnJlbnRNdXNpYygpIHsKICAgICAgLy8gY29uc29sZS5sb2coImRvd25sb2FkIik7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubXVzaWNEZXRhaWwsIHRoaXMubXVzaWNVcmwpOwoKICAgICAgLy8g5Yy56YWN6LWE5rqQ55qE5Z+f5ZCNCiAgICAgIGxldCB1cmwgPSB0aGlzLm11c2ljVXJsLm1hdGNoKC9caHR0cC4qP1wubmV0Lyk7CiAgICAgIC8vIOWMuemFjeWfn+WQjeWQjeensO+8jOW5tuWMuemFjeWvueW6lOeahOS7o+eQhgogICAgICBsZXQgc2VydmUgPSB1cmxbMF0ubWF0Y2goL2h0dHA6XC8oXFMqKS5tdXNpYy8pWzFdOwogICAgICBpZiAoCiAgICAgICAgc2VydmUgIT0gIi9tNyIgJiYKICAgICAgICBzZXJ2ZSAhPSAiL203MDEiICYmCiAgICAgICAgc2VydmUgIT0gIi9tOCIgJiYKICAgICAgICBzZXJ2ZSAhPSAiL204MDEiCiAgICAgICkgewogICAgICAgIC8vIOayoeacieWvueW6lOeahOS7o+eQhgogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWMuemFjeS4jeWIsOWvueW6lOeahOS7o+eQhizkuIvovb3lpLHotKUhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOaIquWPluWQjumdoueahOWPguaVsAogICAgICBsZXQgcGFyYW1zID0gdGhpcy5tdXNpY1VybC5zbGljZSh1cmxbMF0ubGVuZ3RoKTsKCiAgICAgIGxldCBkb3dubG9hZE11c2ljSW5mbyA9IHsKICAgICAgICB1cmw6IHNlcnZlICsgcGFyYW1zLAogICAgICAgIG5hbWU6CiAgICAgICAgICB0aGlzLm11c2ljRGV0YWlsLm5hbWUgKwogICAgICAgICAgIiAtICIgKwogICAgICAgICAgdGhpcy5tdXNpY0RldGFpbC5hclswXS5uYW1lICsKICAgICAgICAgICIuIiArCiAgICAgICAgICBtdXNpY1R5cGUsCiAgICAgIH07CgogICAgICBjb25zb2xlLmxvZyhkb3dubG9hZE11c2ljSW5mbyk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlRG93bmxvYWRNdXNpY0luZm8iLCBkb3dubG9hZE11c2ljSW5mbyk7CiAgICB9LAoKICAgIC8vIOeCueWHu+atjOaJi+WQjei3s+i9rOiHs+atjOaJi+mhtemdoueahOWbnuiwgwogICAgZ29Ub1NpbmdlckRldGFpbCgpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggPT0gYC9zaW5nZXJEZXRhaWwvJHt0aGlzLm11c2ljRGV0YWlsLmFyWzBdLmlkfWApCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogInNpbmdlckRldGFpbCIsCiAgICAgICAgICBwYXJhbXM6IHsgaWQ6IHRoaXMubXVzaWNEZXRhaWwuYXJbMF0uaWQgfSwKICAgICAgICB9KTsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmlzTXVzaWNEZXRhaWxDYXJkU2hvdyA9PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY29tbWl0KCJjaGFuZ2VNdXNpY0RldGFpbENhcmRTdGF0ZSIsIGZhbHNlKTsKICAgICAgfQogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgLy8g55uR5ZCsdnVleOS4rW11c2ljSWTnmoTlj5jljJYKICAgICIkc3RvcmUuc3RhdGUubXVzaWNJZCIoaWQpIHsKICAgICAgY29uc29sZS5sb2coInZ1ZXjkuK3nmoRpZOWPkeeUn+S6huWPmOWMliIpOwogICAgICAvLyDlhYjmmoLlgZzlvZPliY3mkq3mlL7nmoTpn7PkuZAKICAgICAgdGhpcy5wYXVzZU11c2ljKCk7CiAgICAgIHRoaXMubXVzaWNMaXN0ID0gdGhpcy4kc3RvcmUuc3RhdGUubXVzaWNMaXN0OwogICAgICB0aGlzLmdldE11c2ljRGV0YWlsRnJvbU11c2ljTGlzdCgpOwogICAgICB0aGlzLmdldE11c2ljRGV0YWlsKGlkKTsKICAgICAgZHVyYXRpb25OdW0gPSByZXR1cm5TZWNvbmQodGhpcy5kdXJhdGlvbik7CiAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuWWnOasouW9k+WJjemfs+S5kAogICAgICB0aGlzLmdldElzVXNlckxpa2VDdXJyZW50TXVzaWMoKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5hdWRpb1BsYXllcik7CiAgICB9LAogICAgLy8g55uR5ZCsY3VycmVudEluZGV455qE5Y+Y5YyWCiAgICAiJHN0b3JlLnN0YXRlLmN1cnJlbnRJbmRleCIoY3VycmVudEluZGV4LCBsYXN0SW5kZXgpIHsKICAgICAgaWYgKHRoaXMuaGFzRHJhd2VyT3BlbmQpIHsKICAgICAgICB0aGlzLmhhbmRsZURyYXdlckxpc3RET00oY3VycmVudEluZGV4LCBsYXN0SW5kZXgpOwogICAgICB9CiAgICB9LAogICAgLy8g55uR5ZCs5pKt5pS+54q25oCBCiAgICAiJHN0b3JlLnN0YXRlLmlzUGxheSIoaXNQbGF5KSB7CiAgICAgIGlmIChpc1BsYXkpIHsKICAgICAgICB0aGlzLnBsYXlNdXNpYygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGF1c2VNdXNpYygpOwogICAgICB9CiAgICB9LAogICAgIiRzdG9yZS5zdGF0ZS5pc0xvZ2luIihjdXJyZW50KSB7CiAgICAgIGlmIChjdXJyZW50KSB7CiAgICAgICAgdGhpcy5nZXRMaWtlTXVzaWNMaXN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5riF56m65Zac5qyi5YiX6KGoCiAgICAgICAgdGhpcy5saWtlTXVpc2NMaXN0ID0gW107CiAgICAgIH0KICAgIH0sCiAgfSwKICBmaWx0ZXJzOiB7CiAgICBoYW5kbGVNdXNpY1RpbWUsCiAgfSwKfTsK"},{"version":3,"sources":["BottomControl.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BottomControl.vue","sourceRoot":"src/components/bottomControl","sourcesContent":["<template>\n  <div class=\"bottomControl\">\n    <audio\n      :src=\"musicUrl\"\n      ref=\"audioPlayer\"\n      autoplay\n      @play=\"changeState(true)\"\n      @pause=\"changeState(false)\"\n      @ended=\"changeMusic('next')\"\n      @timeupdate=\"timeupdate\"\n    ></audio>\n    <!-- 左边 -->\n    <div class=\"left\">\n      <div class=\"avatar\" @click=\"$store.commit('changeMusicDetailCardState')\">\n        <img\n          :src=\"musicDetail.al.picUrl\"\n          alt=\"\"\n          v-if=\"musicDetail.al\"\n          :draggable=\"false\"\n        />\n        <img src=\"~assets/img/logo_1.jpg\" alt=\"\" v-else :draggable=\"false\" />\n      </div>\n      <div class=\"musicInfo\">\n        <div class=\"musicName\" v-if=\"musicDetail && musicDetail.name\">\n          {{ musicDetail.name }}\n        </div>\n        <div\n          class=\"singer\"\n          v-if=\"musicDetail && musicDetail.name\"\n          @click=\"goToSingerDetail\"\n        >\n          {{ musicDetail.ar[0].name }}\n        </div>\n      </div>\n      <div class=\"downloadContainer\" v-if=\"musicDetail.name\">\n        <i class=\"iconfont icon-download\" @click=\"downloadCurrentMusic\"></i>\n      </div>\n    </div>\n    <!-- 中间 -->\n    <div class=\"center\">\n      <div class=\"buttons\">\n        <span @click=\"playType = playType == 'order' ? 'random' : 'order'\"\n          ><i class=\"iconfont icon-xunhuan\" v-if=\"playType == 'order'\"></i\n          ><i class=\"iconfont icon-suiji1\" v-else></i\n        ></span>\n        <span @click=\"musicList.length != 0 ? changeMusic('pre') : ''\"\n          ><i class=\"iconfont icon-shangyishou\"></i\n        ></span>\n        <span @click=\"musicList.length != 0 ? changePlayState() : ''\">\n          <i\n            class=\"iconfont icon-icon_play\"\n            v-if=\"!this.$store.state.isPlay\"\n          ></i>\n          <i class=\"iconfont icon-zantingtingzhi\" v-else></i>\n        </span>\n        <span @click=\"musicList.length != 0 ? changeMusic('next') : ''\"\n          ><i class=\"iconfont icon-xiayishou\"></i\n        ></span>\n        <span\n          ><i\n            class=\"iconfont icon-xihuan\"\n            :class=\"isUserLikeCurrentMusic ? 'like' : ''\"\n            @click=\"musicList.length != 0 ? likeIt() : ''\"\n          ></i\n        ></span>\n      </div>\n      <!-- 进度条 -->\n      <div class=\"progressBar\">\n        <span class=\"currentTime\">{{ currentTime | handleMusicTime }}</span>\n        <!-- :value 是单向的  要实现双向要v-model -->\n        <el-slider\n          class=\"progressSlider\"\n          v-model=\"timeProgress\"\n          :show-tooltip=\"false\"\n          @change=\"changeProgress\"\n          :disabled=\"musicList.length == 0\"\n        ></el-slider>\n        <span class=\"totalTime\">{{ duration }}</span>\n      </div>\n    </div>\n    <!-- 右边 -->\n    <div class=\"right\">\n      <div class=\"volumeControl\">\n        <i class=\"iconfont icon-yinliang\" @click=\"changeMutedState\"></i>\n        <el-slider\n          class=\"volumeSlider\"\n          v-model=\"volume\"\n          @input=\"changeVolume\"\n          :show-tooltip=\"false\"\n        ></el-slider>\n      </div>\n      <div class=\"playList\" @click=\"openDrawer\">\n        <i class=\"iconfont icon-bofangliebiao\"></i>\n      </div>\n    </div>\n    <!-- 抽屉 -->\n    <el-drawer :visible.sync=\"drawer\" :with-header=\"false\" width=\"300\">\n      <div class=\"drawerHeader\">总{{ musicList.length }}首</div>\n      <el-table\n        :data=\"musicList\"\n        stripe\n        style=\"width: 100%\"\n        :show-header=\"false\"\n        @row-dblclick=\"clickRow\"\n        highlight-current-row\n        lazy\n      >\n        <el-table-column prop=\"name\" width=\"150px\"> </el-table-column>\n        <el-table-column prop=\"ar[0].name\" width=\"80px\"> </el-table-column>\n        <el-table-column prop=\"dt\" width=\"70px\"> </el-table-column>\n      </el-table>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport { handleMusicTime, returnSecond } from \"plugins/utils\";\nlet lastSecond = 0;\n// 总时长的秒数\nlet durationNum = 0;\n// 保存当前音量\nlet volumeSave = 0;\n// 当前音乐类型，用于下载\nlet musicType = \"\";\n\nexport default {\n  name: \"BottomControl\",\n  data() {\n    return {\n      musicDetail: {},\n      musicUrl: \"\",\n      musicList: [],\n      currentMusicIndex: 0,\n      drawer: false,\n      // 音乐总时长\n      duration: \"00:00\",\n      // 当前播放时间位置\n      currentTime: 0,\n      // 进度条的位置\n      timeProgress: 0,\n      // 音量\n      volume: 30,\n      // 是否静音\n      isMuted: false,\n      // 抽屉是否被打开过（如果没打开过，里面的数据是不会渲染的）\n      hasDrawerOpend: false,\n      // 用户的喜欢音乐列表\n      likeMuiscList: [],\n      // 用户是否喜欢当前音乐\n      isUserLikeCurrentMusic: false,\n      // 播放模式（顺序播放，随机播放）\n      // order random\n      playType: \"order\",\n    };\n  },\n  methods: {\n    // 请求\n    // 请求歌曲的url\n    async getMusicDetail(id) {\n      this.$store.commit(\"updateMusicLoadState\", true);\n      let result = await this.$request(\"/song/url\", { id });\n      // console.log(musicDetail);\n      // console.log(result);\n      // 获取不到url\n      if (result.data.data[0].url == null) {\n        this.$message.error(\"该歌曲暂无版权，将为您播放下一首歌曲\");\n        this.changeMusic(\"next\");\n        return;\n      }\n      this.musicUrl = result.data.data[0].url;\n      musicType = result.data.data[0].type.toLowerCase();\n      this.$store.commit(\"updateMusicLoadState\", false);\n    },\n    // 喜欢该音乐\n    // like参数:是否喜欢该音乐\n    async likeMusic(id, like) {\n      let res = await this.$request(\"/like\", { id, like });\n      if (res.data.code == 200) {\n        console.log(\"喜欢操作成功\");\n      } else {\n        console.log(\"喜欢操作失败\");\n      }\n    },\n    // 获取喜欢音乐列表\n    async getLikeMusicList() {\n      // 获取时间戳\n      var timestamp = Date.parse(new Date());\n      // 因为喜欢音乐列表实时性较高，为了避免接口缓存，在请求后面加上一个时间戳\n      let res = await this.$request(\"/likelist\", {\n        uid: window.localStorage.getItem(\"userId\"),\n        timestamp,\n      });\n      this.likeMuiscList = res.data.ids;\n      this.$store.commit(\"updataLikeMuiscList\", this.likeMuiscList);\n    },\n\n    // 点击播放键的回调\n    changePlayState() {\n      !this.$store.state.isPlay ? this.playMusic() : this.pauseMusic();\n    },\n    // 播放音乐的函数\n    playMusic() {\n      this.$refs.audioPlayer.play();\n    },\n    // 暂停音乐的函数\n    pauseMusic() {\n      this.$refs.audioPlayer.pause();\n    },\n    // audio开始或暂停播放的回调  在vuex中改变状态\n    changeState(state) {\n      this.$store.commit(\"changePlayState\", state);\n    },\n    // 根据id找到 musicList中对应的musicDetail\n    getMusicDetailFromMusicList() {\n      let index = this.musicList.findIndex(\n        (item) => item.id == this.$store.state.musicId\n      );\n      console.log(index);\n      if (index != -1) {\n        // 记录当前音乐的index\n        this.currentMusicIndex = index;\n        // 将索引传至vuex\n        this.$store.commit(\"updateCurrentIndex\", index);\n        this.musicDetail = this.musicList[index];\n        // 直接从audio标签中的duration属性拿时长会有请求时差问题，所以直接在musicInfo中拿\n        this.duration = this.musicList[index].dt;\n      }\n    },\n    // 切歌函数\n    changeMusic(type, id) {\n      if (type == \"click\") {\n        // 点击抽屉row进行切歌\n        this.$store.commit(\"updateMusicId\", id);\n      } else if (type == \"pre\") {\n        let currentMusicIndex = this.currentMusicIndex;\n        let preIndex;\n        if (this.playType == \"order\") {\n          preIndex =\n            currentMusicIndex - 1 < 0\n              ? this.musicList.length - 1\n              : currentMusicIndex - 1;\n        } else if (this.playType == \"random\") {\n          if (this.musicList.length == 1) {\n            preIndex = currentMusicIndex;\n          } else {\n            // Math.floor(Math.random()*10); 可均衡获取0到9的随机整数。\n            preIndex = currentMusicIndex;\n            while (preIndex == currentMusicIndex) {\n              preIndex = Math.floor(Math.random() * this.musicList.length);\n            }\n          }\n        }\n        console.log(this.musicList[preIndex].id);\n        this.$store.commit(\"updateMusicId\", this.musicList[preIndex].id);\n      } else if (type == \"next\") {\n        let currentMusicIndex = this.currentMusicIndex;\n        let nextIndex;\n        if (this.playType == \"order\") {\n          nextIndex =\n            currentMusicIndex + 1 == this.musicList.length\n              ? 0\n              : currentMusicIndex + 1;\n        } else if (this.playType == \"random\") {\n          if (this.musicList.length == 1) {\n            nextIndex = currentMusicIndex;\n          } else {\n            // Math.floor(Math.random()*10); 可均衡获取0到9的随机整数。\n            nextIndex = currentMusicIndex;\n            while (nextIndex == currentMusicIndex) {\n              nextIndex = Math.floor(Math.random() * this.musicList.length);\n            }\n          }\n        }\n        // console.log(this.musicList[nextIndex].id);\n        this.$store.commit(\"updateMusicId\", this.musicList[nextIndex].id);\n      }\n    },\n    // 双击抽屉列表中的row的回调\n    clickRow(row) {\n      // console.log(row.id);\n      this.changeMusic(\"click\", row.id);\n    },\n    // 当前播放时间位置\n    timeupdate() {     \n      let time = this.$refs.audioPlayer.currentTime;\n      // 将当前播放时间保存到vuex  如果保存到vuex这步节流,会导致歌词不精准,误差最大有1s\n      this.$store.commit(\"updateCurrentTime\", time);\n\n      time = Math.floor(time);\n      if (time !== lastSecond) {\n        // console.log(time);\n        lastSecond = time;\n        this.currentTime = time;\n        // 计算进度条的位置\n        this.timeProgress = Math.floor((time / durationNum) * 100);\n        // console.log(this.timeProgress);\n      }\n    },\n    // 拖动进度条的回调\n    changeProgress(e) {\n      // console.log(e);\n      // 修改当前播放时间\n      this.currentTime = Math.floor((e / 100) * durationNum);\n      // 改变audio的实际当前播放时间\n      this.$refs.audioPlayer.currentTime = this.currentTime;\n    },\n    // 拖动音量条的回调\n    changeVolume(e) {\n      // 改变audio的音量\n      // input事件 实时触发\n      this.$refs.audioPlayer.volume = e / 100;\n      if (this.isMuted && e > 0) {\n        this.isMuted = false;\n      } else if (e == 0 && this.isMuted == false) {\n        this.isMuted = true;\n      }\n    },\n    // 点击小喇叭的回调 （切换静音状态）\n    changeMutedState() {\n      if (this.isMuted) {\n        this.volume = volumeSave;\n      } else {\n        volumeSave = this.volume;\n        this.volume = 0;\n      }\n      console.log(volumeSave, this.isMuted);\n      this.isMuted = !this.isMuted;\n    },\n    // 操作drawerList中DOM的函数\n    handleDrawerListDOM(currentIndex, lastIndex) {\n      //操作原生DOM\n      this.$nextTick(() => {\n        let tableRows = document\n          .querySelector(\".bottomControl\")\n          .querySelectorAll(\".el-table__row\");\n        // // 直接修改dom样式的颜色无效  可能是因为第三方组件 style scoped的原因\n        // // 通过引入全局样式解决\n        if (tableRows[currentIndex]) {\n          tableRows[currentIndex].children[0]\n            .querySelector(\".cell\")\n            .classList.add(\"currentRow\");\n          tableRows[currentIndex].children[1]\n            .querySelector(\".cell\")\n            .classList.add(\"currentRow\");\n        }\n        if (\n          (lastIndex && lastIndex != -1 && tableRows[lastIndex]) ||\n          lastIndex == 0\n        ) {\n          // 将上一首的类名删掉\n          tableRows[lastIndex].children[0]\n            .querySelector(\".cell\")\n            .classList.remove(\"currentRow\");\n          tableRows[lastIndex].children[1]\n            .querySelector(\".cell\")\n            .classList.remove(\"currentRow\");\n        }\n      });\n    },\n    // 点击打开抽屉的回调\n    openDrawer() {\n      // 关闭也是这个回调，所以直接取反\n      this.drawer = !this.drawer;\n      this.hasDrawerOpend = true;\n      this.handleDrawerListDOM(this.currentMusicIndex);\n    },\n\n    // 判断用户是否喜欢该音乐\n    getIsUserLikeCurrentMusic() {\n      this.isUserLikeCurrentMusic = this.likeMuiscList.find(\n        (item) => item == this.$store.state.musicId\n      );\n    },\n    // 用户点击喜欢该音乐的回调\n    async likeIt() {\n      if (!this.$store.state.isLogin) {\n        this.$message.error(\"请先登录!\");\n        return;\n      }\n      this.isUserLikeCurrentMusic = !this.isUserLikeCurrentMusic;\n      await this.likeMusic(\n        this.$store.state.musicId,\n        this.isUserLikeCurrentMusic\n      );\n      await this.getLikeMusicList();\n    },\n\n    // 点击下载按钮的回调\n    downloadCurrentMusic() {\n      // console.log(\"download\");\n      console.log(this.musicDetail, this.musicUrl);\n\n      // 匹配资源的域名\n      let url = this.musicUrl.match(/\\http.*?\\.net/);\n      // 匹配域名名称，并匹配对应的代理\n      let serve = url[0].match(/http:\\/(\\S*).music/)[1];\n      if (\n        serve != \"/m7\" &&\n        serve != \"/m701\" &&\n        serve != \"/m8\" &&\n        serve != \"/m801\"\n      ) {\n        // 没有对应的代理\n        this.$message.error(\"匹配不到对应的代理,下载失败!\");\n        return;\n      }\n      // 截取后面的参数\n      let params = this.musicUrl.slice(url[0].length);\n\n      let downloadMusicInfo = {\n        url: serve + params,\n        name:\n          this.musicDetail.name +\n          \" - \" +\n          this.musicDetail.ar[0].name +\n          \".\" +\n          musicType,\n      };\n\n      console.log(downloadMusicInfo);\n      this.$store.commit(\"updateDownloadMusicInfo\", downloadMusicInfo);\n    },\n\n    // 点击歌手名跳转至歌手页面的回调\n    goToSingerDetail() {\n      if (this.$route.path == `/singerDetail/${this.musicDetail.ar[0].id}`)\n        this.$router.push({\n          name: \"singerDetail\",\n          params: { id: this.musicDetail.ar[0].id },\n        });\n      if (this.$store.state.isMusicDetailCardShow == true) {\n        this.$store.state.commit(\"changeMusicDetailCardState\", false);\n      }\n    },\n  },\n\n  watch: {\n    // 监听vuex中musicId的变化\n    \"$store.state.musicId\"(id) {\n      console.log(\"vuex中的id发生了变化\");\n      // 先暂停当前播放的音乐\n      this.pauseMusic();\n      this.musicList = this.$store.state.musicList;\n      this.getMusicDetailFromMusicList();\n      this.getMusicDetail(id);\n      durationNum = returnSecond(this.duration);\n      // 判断用户是否喜欢当前音乐\n      this.getIsUserLikeCurrentMusic();\n      // console.log(this.$refs.audioPlayer);\n    },\n    // 监听currentIndex的变化\n    \"$store.state.currentIndex\"(currentIndex, lastIndex) {\n      if (this.hasDrawerOpend) {\n        this.handleDrawerListDOM(currentIndex, lastIndex);\n      }\n    },\n    // 监听播放状态\n    \"$store.state.isPlay\"(isPlay) {\n      if (isPlay) {\n        this.playMusic();\n      } else {\n        this.pauseMusic();\n      }\n    },\n    \"$store.state.isLogin\"(current) {\n      if (current) {\n        this.getLikeMusicList();\n      } else {\n        // 清空喜欢列表\n        this.likeMuiscList = [];\n      }\n    },\n  },\n  filters: {\n    handleMusicTime,\n  },\n};\n</script>\n\n<style scoped>\n.bottomControl {\n  /* background-color: pink; */\n  border-top: 1px solid #ddd;\n  width: 100%;\n  height: 55px;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-between;\n  padding: 6px 10px;\n  z-index: 10000;\n  background-color: #fff;\n}\n\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 5px;\n  overflow: hidden;\n  margin-right: 10px;\n  cursor: pointer;\n}\n\n.avatar img {\n  width: 100%;\n}\n\n.left {\n  display: flex;\n  align-items: center;\n  width: 123px;\n}\n\n.musicInfo {\n  color: rgb(37, 37, 37);\n  font-size: 12px;\n  width: 70px;\n}\n\n.musicName {\n  margin-bottom: 4px;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.singer {\n  transform: scale(0.9);\n  margin-left: -3px;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n}\n\n.center {\n  margin-top: 5px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.buttons {\n  display: flex;\n  align-items: center;\n  height: 13px;\n}\n\n.buttons i {\n  font-size: 20px;\n  color: #313131;\n}\n\n.buttons span:nth-child(3) i {\n  font-size: 25px;\n}\n\n.center .icon-xunhuan {\n  font-size: 17px;\n}\n.center .icon-xihuan {\n  font-size: 15px;\n}\n\n.right {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.volumeControl {\n  display: flex;\n  align-items: center;\n  margin-right: 15px;\n}\n\n.icon-yinliang {\n  font-size: 18px;\n  margin-right: 7px;\n}\n\n.volumeSlider {\n  width: 55px;\n}\n\n.icon-bofangliebiao {\n  font-size: 18px;\n  margin-right: 10px;\n}\n\n.progressSlider {\n  width: 300px;\n}\n\n.buttons span {\n  display: inline-block;\n  width: 50px;\n  box-sizing: border-box;\n  text-align: center;\n}\n\n.icon-zantingtingzhi {\n  font-size: 35px !important;\n}\n\n.drawerHeader {\n  font-size: 12px;\n  transform: scale(0.9);\n  color: #aaa;\n  padding: 15px 0;\n}\n\n.progressBar {\n  display: flex;\n  align-items: center;\n}\n\n.currentTime,\n.totalTime {\n  font-size: 12px;\n  transform: scale(0.85);\n  color: #aaa;\n  margin: 0 5px;\n  width: 30px;\n  text-align: center;\n}\n\n.progressBar {\n  height: 10px;\n  margin-top: 12px;\n  overflow: hidden;\n}\n\n.like {\n  color: \t\t#000088 !important;\n}\n\n.downloadContainer {\n  height: 100%;\n  position: relative;\n}\n\n.downloadContainer i {\n  position: absolute;\n  bottom: 5px;\n}\n\n.recondInfo {\n  position: absolute;\n  font-size: 12px;\n  transform: scale(0.8);\n  width: 140px;\n  right: -5px;\n  bottom: -5px;\n}\n\n.center .icon-suiji1 {\n  font-size: 15px;\n}\n</style>"]}]}