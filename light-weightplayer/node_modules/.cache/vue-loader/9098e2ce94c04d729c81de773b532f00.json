{"remainingRequest":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\light-weightPlayer\\light-weightplayer\\src\\components\\comment\\Comment.vue?vue&type=style&index=0&id=9b7ef5a2&scoped=true&lang=css&","dependencies":[{"path":"D:\\light-weightPlayer\\light-weightplayer\\src\\components\\comment\\Comment.vue","mtime":1632135031000},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636408356404},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636408358142},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\postcss-loader\\src\\index.js","mtime":1636408357193},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmhvdENvbW1lbnRzIHsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIHdpZHRoOiAxMDAlOwp9CgouY29tbWVudEhlYWRlciB7CiAgZm9udC1zaXplOiAxNHB4OwogIGNvbG9yOiByZ2IoMjYsIDI2LCAyNik7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBwYWRkaW5nOiAxMHB4IDA7Cn0KLmNvbW1lbnRJdGVtIHsKICBkaXNwbGF5OiBmbGV4OwogIG1hcmdpbjogNXB4IDA7CiAgcGFkZGluZzogMTBweCAwIDIwcHg7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7CiAgZm9udC1zaXplOiAxMnB4Owp9CgouY29tbWVudENyZWF0b3JBdmF0YXIgewogIHdpZHRoOiAzNXB4OwogIGhlaWdodDogMzVweDsKICBtYXJnaW46IDBweCAxMHB4IDAgMDsKfQoKLmNvbW1lbnRDcmVhdG9yQXZhdGFyIGltZyB7CiAgd2lkdGg6IDEwMCU7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmNvbW1lbnRNYWluIHsKICB3aWR0aDogY2FsYygxMDAlIC0gNTBweCk7Cn0KCi5jb21tZW50VXNlck5pY2tOYW1lIHsKICBjb2xvcjogIzVhOGFiOTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5jb21tZW50Qm90dG9tIHsKICBtYXJnaW4tdG9wOiAycHg7CiAgY29sb3I6IHJnYigxNzIsIDE3MiwgMTcyKTsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwp9CgouY29tbWVudEJ1dHRvbnMgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQouY29tbWVudEJ1dHRvbnMgZGl2IHsKICBtYXJnaW4tdG9wOiAtM3B4OwogIHBhZGRpbmc6IDAgOHB4OwogIHRyYW5zZm9ybTogc2NhbGUoMC44NSk7Cn0KCi5jb21tZW50QnV0dG9ucyBkaXY6bnRoLWNoaWxkKDEpIHsKICBmb250LXNpemU6IDE0cHg7Cn0KCi5yZXBsaWVkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0OwogIG1hcmdpbjogN3B4IDA7CiAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgoucmVwbGllZEl0ZW0gewogIHBhZGRpbmc6IDdweCAxMHB4OwogIGxpbmUtaGVpZ2h0OiAyMHB4Owp9CgoucmVwbGllZFVzZXIgewogIGNvbG9yOiAjNWE4YWI5OwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLnBhZ2UgewogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nLWJvdHRvbTogMjBweDsKfQoKLmNvbW1lbnRDb250ZW50ID4gc3BhbiB7CiAgbGluZS1oZWlnaHQ6IDIwcHg7Cn0KCi5lbC10ZXh0YXJlYSAvZGVlcC8gLmVsLXRleHRhcmVhX19pbm5lciB7CiAgaGVpZ2h0OiA2NXB4ICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAxMnB4OwogIHJlc2l6ZTogbm9uZTsKfQoKLmVsLXRleHRhcmVhIC9kZWVwLyAuZWwtdGV4dGFyZWFfX2lubmVyOmZvY3VzIHsKICBib3JkZXItY29sb3I6ICNhYWE7Cn0KCi5lbC10ZXh0YXJlYSAvZGVlcC8gLmVsLWlucHV0X19jb3VudCB7CiAgdHJhbnNmb3JtOiBzY2FsZSgwLjkpOwp9Cgouc3VibWl0Q29tbWVudEJ1dHRvbiB7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgbWFyZ2luOiAxMHB4IDA7Cn0KCi5lbC1idXR0b246aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7Cn0KCi5lbC1idXR0b24gewogIHRyYW5zZm9ybTogc2NhbGUoMC45KSB0cmFuc2xhdGVYKDUlKTsKfQoKLnN1Ym1pdENvbW1lbnQ6Zm9jdXMgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KCi5jb21tZW50Q2FyZFN3aXRjaCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDUwJTsKICB0b3A6IGNhbGMoODB2aCAtIDEwNXB4KTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgc2NhbGUoMC45KTsKICBib3JkZXI6IG5vbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsKICBsaW5lLWhlaWdodDogMTVweDsKICBwYWRkaW5nOiAxMHB4IDEwcHggMTBweCAzMHB4Owp9CgouY29tbWVudENhcmRTd2l0Y2g6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNlMWUxZTE7Cn0KCi5jb21tZW50Q2FyZFN3aXRjaCBpIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogMTBweDsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7Cn0KCi5tdXNpY1RpdGxlIHsKICB3aWR0aDogMTAwJTsKICBmb250LXdlaWdodDogYm9sZDsKICBjb2xvcjogIzMzMzMzMzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQoKLm11c2ljQ29tbWVudEFyZWEgL2RlZXAvIC5lbC10ZXh0YXJlYV9faW5uZXIgewogIGhlaWdodDogMTEwcHggIWltcG9ydGFudDsKfQoKLm11c2ljU3VibWl0Q29tbWVudCB7CiAgcGFkZGluZzogOHB4IDIwcHg7CiAgZm9udC1zaXplOiAxM3B4OwogIGJhY2tncm91bmQtY29sb3I6ICNlYzQxNDE7CiAgY29sb3I6IHdoaXRlOwogIGJvcmRlcjogbm9uZTsKfQoKLm11c2ljU3VibWl0Q29tbWVudDpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ViMmUyZTsKICBjb2xvcjogd2hpdGU7Cn0KCi5tdXNpY1N1Ym1pdENvbW1lbnQ6Zm9jdXMgewogIGNvbG9yOiB3aGl0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWM0MTQxOwp9CgouY29tbWVudERpYWxvZyAvZGVlcC8gLmVsLWRpYWxvZ19fYm9keSB7CiAgcGFkZGluZy1ib3R0b206IDVweCAhaW1wb3J0YW50Owp9CgoubGlrZUN1cnJlbnRDb21tZW50LAoubGlrZUN1cnJlbnRDb21tZW50IGkgewogIGNvbG9yOiAjZWM0MTQxICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAybA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/components/comment","sourcesContent":["<template>\n  <div class=\"hotComments\">\n    <div\n      class=\"comments\"\n      v-if=\"commentType != '' && commentType != 'music' && isHotComment\"\n    >\n      <el-input\n        type=\"textarea\"\n        class=\"commentArea\"\n        maxlength=\"140\"\n        show-word-limit\n        v-model=\"commentInput\"\n        placeholder=\"留下你的评论\"\n        @input=\"inputComment\"\n      ></el-input>\n      <div class=\"submitCommentButton\">\n        <el-button\n          size=\"mini\"\n          round\n          @click=\"commentMode ? submitComment() : submitFloorComment()\"\n          class=\"submitComment\"\n          >评论</el-button\n        >\n      </div>\n    </div>\n    <!-- 音乐单曲评论 -->\n    <div\n      class=\"musicComment\"\n      v-else-if=\"commentType != '' && commentType == 'music'\"\n    >\n      <el-button class=\"commentCardSwitch\" size=\"mini\" round @click=\"openDialog\"\n        ><i class=\"iconfont icon-ziyuan\"></i> 发表我的音乐评论</el-button\n      >\n      <el-dialog\n        :visible=\"isCommentDialogShow\"\n        width=\"400px\"\n        @close=\"closeCommentDialog\"\n        append-to-body\n        class=\"commentDialog\"\n      >\n        <div class=\"musicTitle\">歌曲：{{ musicTitle }}</div>\n        <el-input\n          type=\"textarea\"\n          class=\"commentArea musicCommentArea\"\n          maxlength=\"140\"\n          show-word-limit\n          v-model=\"commentInput\"\n          @input=\"inputComment\"\n          placeholder=\"留下你的评论\"\n        ></el-input>\n        <!-- 提交评论 -->\n        <div class=\"submitCommentButton\">\n          <el-button\n            size=\"mini\"\n            round\n            @click=\"commentMode ? submitComment() : submitFloorComment()\"\n            class=\"submitComment musicSubmitComment\"\n            >评论</el-button\n          >\n        </div>\n      </el-dialog>\n    </div>\n    <div class=\"commentHeader\"><slot name=\"title\"></slot></div>\n    <div class=\"commentItem\" v-for=\"(item, index) in comments\" :key=\"index\">\n      <div class=\"commentCreatorAvatar\">\n        <img\n          :src=\"item.user.avatarUrl + '?param=100y100'\"\n          alt=\"\"\n          @click=\"goToPersonal(item.user.userId)\"\n        />\n      </div>\n      <div class=\"commentMain\">\n        <div class=\"commentContent\">\n          <span\n            class=\"commentUserNickName\"\n            @click=\"goToPersonal(item.user.userId)\"\n            >{{ item.user.nickname }}:&nbsp;</span\n          >\n          <span>{{ item.content }}</span>\n        </div>\n        <div class=\"replied\">\n          <div\n            class=\"repliedItem\"\n            v-for=\"(item1, index1) in item.beReplied\"\n            :key=\"index1\"\n          >\n            <span class=\"repliedUser\" @click=\"goToPersonal(item.user.userId)\"\n              >@{{ item1.user.nickname }}:&nbsp;</span\n            >\n            <span class=\"repliedContent\">{{ item1.content }}</span>\n          </div>\n        </div>\n        <div class=\"commentBottom\">\n          <div class=\"commentCreatedTime\">\n            {{ item.time | showDate }}\n          </div>\n          <div class=\"commentButtons\">\n            <div\n              @click=\"likeCurrentComment(item.liked, item.commentId)\"\n              :class=\"item.liked ? 'likeCurrentComment' : ''\"\n            >\n              <i class=\"iconfont icon-good\"></i> {{ item.likedCount }}\n            </div>\n            <div><i class=\"iconfont icon-zhuanfa\"></i></div>\n            <div>\n              <i\n                class=\"iconfont icon-pinglun\"\n                @click=\"floorComment(item.commentId, item.user.nickname)\"\n              ></i>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { formatDate } from \"plugins/utils\";\n\nexport default {\n  name: \"Comment\",\n  props: {\n    // 评论数据\n    comments: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    // 评论的类型\n    commentType: {\n      type: String,\n      default() {\n        return \"\";\n      },\n    },\n    // 评论对象的id\n    commentId: {\n      type: String,\n      default() {\n        return \"\";\n      },\n    },\n    // 歌曲评论需要歌曲名称\n    musicTitle: {\n      type: String,\n      default() {\n        return \"\";\n      },\n    },\n    // 是否是热门评论\n    isHotComment: {\n      type: Boolean,\n      default() {\n        return true;\n      },\n    },\n  },\n  data() {\n    return {\n      commentInput: \"\",\n      // 是否显示评论dialog\n      isCommentDialogShow: false,\n      // 评论模式   true是常规评论   false是楼层评论\n      commentMode: true,\n      // 楼层回复前面几个字的长度\n      floorCommentInputLength: 0,\n      // 用于暂存楼层评论id\n      floorCommentId: \"\",\n    };\n  },\n  methods: {\n    // 点击提交评论的回调\n    async submitComment() {\n      // 判断是否登录\n      if (!this.$store.state.isLogin) {\n        this.$message.warning(\"只有登陆后才能评论哦!\");\n        return;\n      }\n\n      // 先判断评论内容是否为空\n      if (this.commentInput == \"\") {\n        this.$message.warning(\"评论内容不能为空哦!\");\n        return;\n      }\n\n      // 判断评论的类型\n      let type;\n      switch (this.commentType) {\n        case \"album\":\n          type = 3;\n          break;\n        case \"musicList\":\n          type = 2;\n          break;\n        case \"music\":\n          type = 0;\n          break;\n        case \"mv\":\n          type = 1;\n          break;\n        case \"video\":\n          type = 5;\n          break;\n      }\n      let res = await this.$request(\"/comment\", {\n        t: 1,\n        id: this.commentId,\n        type,\n        content: this.commentInput,\n      }).catch((err) => {\n        // console.log(err.response.data.msg);\n        this.$message.error(err.response.data.msg);\n      });\n\n      if (!res) {\n        return;\n      }\n\n      // console.log(res);\n      if (res.data.code == 200) {\n        // 清空文本框\n        // 如果是单曲卡片评论，还需要关闭卡片\n        if (this.commentType == \"music\") {\n          this.isCommentDialogShow = false;\n        }\n        this.commentInput = \"\";\n        this.$emit(\"getComment\");\n      } else {\n        this.$message.error(\"评论失败,请稍后重试!\");\n      }\n    },\n\n    // 关闭评论dialog的回调\n    closeCommentDialog() {\n      this.isCommentDialogShow = false;\n      this.commentInput = \"\";\n      this.floorCommentId = \"\";\n      this.commentMode = true;\n      this.floorCommentInputLength = 0;\n    },\n    // 点击喜欢该评论的回调\n    async likeCurrentComment(flag, cid) {\n      console.log(flag, cid);\n      // 判断是否登录\n      if (!this.$store.state.isLogin) {\n        this.$message.warning(\"只有登陆后才能点赞哦!\");\n        return;\n      }\n\n      // 获取时间戳\n      var timestamp = Date.parse(new Date());\n\n      // 判断评论的类型\n      let type;\n      switch (this.commentType) {\n        case \"album\":\n          type = 3;\n          break;\n        case \"musicList\":\n          type = 2;\n          break;\n        case \"music\":\n          type = 0;\n          break;\n        case \"mv\":\n          type = 1;\n          break;\n        case \"video\":\n          type = 5;\n          break;\n      }\n\n      let res = await this.$request(\"/comment/like\", {\n        id: this.commentId,\n        cid,\n        t: flag ? 0 : 1,\n        type,\n        timestamp,\n      });\n      console.log(res);\n      if (res.data.code == 200) {\n        this.$emit(\"getComment\");\n      } else {\n        this.$message.error(\"点赞失败,请稍后重试!\");\n      }\n    },\n\n    // 点击楼层评论的回调\n    // commentId是评论id  nickName是评论作者\n    floorComment(commentId, nickName) {\n      console.log(commentId, nickName);\n      // isHotComment为false 说明没有文本框\n      if (this.isHotComment == false) {\n        // 将其转给hotComment处理\n        this.$emit(\"transToHotComment\", { commentId, nickName });\n      }\n      if (this.commentType != \"music\") {\n        // 让父元素滚动到评论框\n        this.$emit(\"scrollToComment\");\n        // 让评论框获得焦点\n        let input = document.querySelector(\".commentArea\");\n        // 阻止focus定位\n        input.children[0].focus({ preventScroll: true });\n      } else {\n        this.openDialog();\n      }\n      this.commentInput = \"回复\" + nickName + \"：\";\n      this.floorCommentInputLength = this.commentInput.length;\n      // 将评论模式改为楼层评论\n      this.commentMode = false;\n      this.floorCommentId = commentId;\n    },\n\n    // 点击提交楼层评论的回调\n    async submitFloorComment() {\n      console.log(\"提交楼层评论\");\n\n      // 判断是否登录\n      if (!this.$store.state.isLogin) {\n        this.$message.warning(\"只有登陆后才能评论哦!\");\n        return;\n      }\n\n      if (this.commentInput.length == this.floorCommentInputLength) {\n        this.$message.error(\"评论内容不能为空哦!\");\n        return;\n      }\n\n      // 判断评论的类型\n      let type;\n      switch (this.commentType) {\n        case \"album\":\n          type = 3;\n          break;\n        case \"musicList\":\n          type = 2;\n          break;\n        case \"music\":\n          type = 0;\n          break;\n        case \"mv\":\n          type = 1;\n          break;\n        case \"video\":\n          type = 5;\n          break;\n      }\n      let res = await this.$request(\"/comment\", {\n        t: 2,\n        id: this.commentId,\n        type,\n        content: this.commentInput,\n        commentId: this.floorCommentId,\n      }).catch((err) => {\n        // console.log(err.response.data.msg);\n        this.$message.error(err.response.data.msg);\n      });\n\n      if (!res) {\n        return;\n      }\n      // console.log(res);\n      if (res.data.code == 200) {\n        // 清空文本框\n        // 如果是单曲卡片评论，还需要关闭卡片\n        if (this.commentType == \"music\") {\n          this.isCommentDialogShow = false;\n        }\n        this.commentInput = \"\";\n        this.commentMode = true;\n        this.floorCommentInputLength = 0;\n        this.floorCommentId = \"\";\n        this.isCommentDialogShow = false;\n        this.$emit(\"getComment\");\n      } else {\n        this.$message.error(\"评论失败,请稍后重试!\");\n      }\n    },\n\n    // 监听键盘事件\n    inputComment() {\n      // 如果是楼层回复\n      if (this.commentMode == false) {\n        if (this.commentInput.length < this.floorCommentInputLength) {\n          // 当长度小于当前楼层评论前面默认的字时\n          this.commentMode = true;\n          console.log(\"修改mode\");\n        }\n      }\n    },\n\n    // 打开musicCommentDialog\n    openDialog() {\n      this.isCommentDialogShow = !this.isCommentDialogShow;\n      // dialog在第一次出现前是不渲染的，所以这里用nextTick\n      this.$nextTick(() => {\n        // 让评论框获得焦点\n        let input = document.querySelector(\".musicCommentArea\");\n        input.children[0].focus();\n        // console.log([input]);\n      });\n    },\n\n    // 点击用户名的回调\n    goToPersonal(userId) {\n      this.$router.push({\n        name: \"personal\",\n        params: { uid: userId },\n      });\n      if (this.commentType == \"music\") {\n        // this.$emit(\"closeMuiscDetailCard\");\n        this.$store.commit(\"changeMusicDetailCardState\", false);\n      }\n    },\n  },\n  filters: {\n    showDate(value) {\n      // 1、先将时间戳转成Date对象\n      const date = new Date(value);\n\n      // 2、将date进行格式化\n      return formatDate(date, \"yyyy-MM-dd\");\n    },\n  },\n  watch: {\n    // 评论数据发生变化时 重置所有发表评论的数据\n    comments(current) {\n      this.commentInpt = \"\";\n      this.isCommentDialogShow = false;\n      this.commentMode = true;\n      this.floorCommentInputLength = 0;\n      this.floorCommentId = \"\";\n    },\n  },\n  created() {},\n};\n</script>\n\n<style scoped>\n.hotComments {\n  margin-bottom: 20px;\n  width: 100%;\n}\n\n.commentHeader {\n  font-size: 14px;\n  color: rgb(26, 26, 26);\n  font-weight: 600;\n  padding: 10px 0;\n}\n.commentItem {\n  display: flex;\n  margin: 5px 0;\n  padding: 10px 0 20px;\n  border-bottom: 1px solid #eee;\n  font-size: 12px;\n}\n\n.commentCreatorAvatar {\n  width: 35px;\n  height: 35px;\n  margin: 0px 10px 0 0;\n}\n\n.commentCreatorAvatar img {\n  width: 100%;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.commentMain {\n  width: calc(100% - 50px);\n}\n\n.commentUserNickName {\n  color: #5a8ab9;\n  cursor: pointer;\n}\n\n.commentBottom {\n  margin-top: 2px;\n  color: rgb(172, 172, 172);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.commentButtons {\n  display: flex;\n  align-items: center;\n}\n.commentButtons div {\n  margin-top: -3px;\n  padding: 0 8px;\n  transform: scale(0.85);\n}\n\n.commentButtons div:nth-child(1) {\n  font-size: 14px;\n}\n\n.replied {\n  background-color: #f4f4f4;\n  margin: 7px 0;\n  border-radius: 5px;\n}\n\n.repliedItem {\n  padding: 7px 10px;\n  line-height: 20px;\n}\n\n.repliedUser {\n  color: #5a8ab9;\n  cursor: pointer;\n}\n\n.page {\n  width: 100%;\n  text-align: center;\n  padding-bottom: 20px;\n}\n\n.commentContent > span {\n  line-height: 20px;\n}\n\n.el-textarea /deep/ .el-textarea__inner {\n  height: 65px !important;\n  font-size: 12px;\n  resize: none;\n}\n\n.el-textarea /deep/ .el-textarea__inner:focus {\n  border-color: #aaa;\n}\n\n.el-textarea /deep/ .el-input__count {\n  transform: scale(0.9);\n}\n\n.submitCommentButton {\n  width: 100%;\n  text-align: right;\n  margin: 10px 0;\n}\n\n.el-button:hover {\n  background-color: #f2f2f2;\n}\n\n.el-button {\n  transform: scale(0.9) translateX(5%);\n}\n\n.submitComment:focus {\n  background-color: #fff;\n}\n\n.commentCardSwitch {\n  position: fixed;\n  left: 50%;\n  top: calc(80vh - 105px);\n  transform: translateX(-50%) scale(0.9);\n  border: none;\n  background-color: #f1f1f1;\n  line-height: 15px;\n  padding: 10px 10px 10px 30px;\n}\n\n.commentCardSwitch:hover {\n  background-color: #e1e1e1;\n}\n\n.commentCardSwitch i {\n  position: absolute;\n  top: 50%;\n  left: 10px;\n  transform: translateY(-50%);\n}\n\n.musicTitle {\n  width: 100%;\n  font-weight: bold;\n  color: #333333;\n  text-align: center;\n  margin-bottom: 10px;\n}\n\n.musicCommentArea /deep/ .el-textarea__inner {\n  height: 110px !important;\n}\n\n.musicSubmitComment {\n  padding: 8px 20px;\n  font-size: 13px;\n  background-color: #ec4141;\n  color: white;\n  border: none;\n}\n\n.musicSubmitComment:hover {\n  background-color: #eb2e2e;\n  color: white;\n}\n\n.musicSubmitComment:focus {\n  color: white;\n  background-color: #ec4141;\n}\n\n.commentDialog /deep/ .el-dialog__body {\n  padding-bottom: 5px !important;\n}\n\n.likeCurrentComment,\n.likeCurrentComment i {\n  color: #ec4141 !important;\n}\n</style>"]}]}