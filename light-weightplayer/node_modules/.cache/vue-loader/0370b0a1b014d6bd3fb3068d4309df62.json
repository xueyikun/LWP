{"remainingRequest":"D:\\GH\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GH\\LWP\\light-weightplayer\\src\\components\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GH\\LWP\\light-weightplayer\\src\\components\\login\\Login.vue","mtime":1636485287760},{"path":"D:\\GH\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\GH\\node_modules\\babel-loader\\lib\\index.js","mtime":1636408357214},{"path":"D:\\GH\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\GH\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbkZvcm06IHsKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgcGhvbmVOdW06ICIiLAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOS6i+S7tgogICAgLy8g54K55Ye755m75b2V5oyJ6ZKu55qE5Zue6LCDCiAgICBsb2dpbigpIHsKICAgICAgdGhpcy5sb2dpbkJ5Q2VsbHBob25lKCk7CiAgICB9LAoKICAgIC8vICAg5omL5py655m75b2V6K+35rGCCiAgICBhc3luYyBsb2dpbkJ5Q2VsbHBob25lKCkgewogICAgICBsZXQgdGltZXN0YW1wID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTsKICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJHJlcXVlc3QoIi9sb2dpbi9jZWxscGhvbmUiLCB7CiAgICAgICAgcGhvbmU6IHRoaXMubG9naW5Gb3JtLnBob25lTnVtLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCwKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgdGltZXN0YW1wLAogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgLy8g55m75b2V5oiQ5YqfCiAgICAgIGlmIChyZXN1bHQuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgIC8vIOWwhuivt+axguWIsOeahOeUqOaIt2lk5a2Y5YWlbG9jYWxzdG9yYWdlCiAgICAgICAgLy8g5ZyoaW5kZXgudnVlIOWSjCBib3R0b21Db250cm9sLnZ1ZeS4reeUqOWIsOi/hwogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcklkIiwgcmVzdWx0LmRhdGEucHJvZmlsZS51c2VySWQpOwogICAgICAgIC8vIHRoaXMudXNlckluZm8gPSByZXN1bHQuZGF0YS5wcm9maWxlOwogICAgICAgIC8vIOWwhnVzZXJJbmZv5Lyg5Zue54i257uE5Lu2CiAgICAgICAgdGhpcy4kZW1pdCgiZ2V0VXNlckluZm8iLCByZXN1bHQuZGF0YS5wcm9maWxlKTsKCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnmbvlvZXmiJDlip8hIik7CiAgICAgICAgLy8g5Yi35paw6aG16Z2iCiAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKDApOwogICAgICAgIC8vIOS/ruaUuXZ1ZXjkuK3nmoTnmbvlvZXnirbmgIEKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0YUxvZ2luU3RhdGUiLCB0cnVlKTsKICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZGF0YS5jb2RlID09IDQwMCkgewogICAgICAgIC8vIOaJi+acuuWPt+mUmeivrwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaJi+acuuWPt+mUmeivryEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmRhdGEuY29kZSA9PSA1MDIpIHsKICAgICAgICAvLyDlr4bnoIHplJnor68KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlr4bnoIHplJnor68hIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOeZu+W9leWksei0pe+8jOivt+eojeWQjumHjeivlQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIueZu+W9leWksei0pe+8jOivt+eojeWQjumHjeivlSEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOa4heepuui+k+WFpeahhueahOWGheWuuQogICAgICB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCA9ICIiOwogICAgICB0aGlzLmxvZ2luRm9ybS5waG9uZU51bSA9ICIiOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/login","sourcesContent":["<template>\n  <div class=\"Login\">\n    <el-form\n      ref=\"form\"\n      v-model=\"loginForm\"\n      label-width=\"80px\"\n      label-position=\"right\"\n      size=\"mini\"\n    >\n      <el-form-item label=\"手机号码：\" size=\"mini\" label-width=\"100px\" required>\n        <input type=\"text\" v-model=\"loginForm.phoneNum\" class=\"loginInput\" />\n      </el-form-item>\n      <el-form-item label=\"密码：\" size=\"mini\" label-width=\"100px\" required>\n        <input\n          type=\"password\"\n          v-model=\"loginForm.password\"\n          class=\"loginInput\"\n        />\n      </el-form-item>\n      <div class=\"loginButton\">\n        <el-button type=\"danger\" @click=\"login\" size=\"mini\">登录</el-button>\n      </div>\n      <div class=\"regEnter\" @click=\"isRegisteredShow = true\">注册</div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loginForm: {\n        password: \"\",\n        phoneNum: \"\",\n      },\n    };\n  },\n  methods: {\n    // 事件\n    // 点击登录按钮的回调\n    login() {\n      this.loginByCellphone();\n    },\n\n    //   手机登录请求\n    async loginByCellphone() {\n      let timestamp = Date.parse(new Date());\n      let result = await this.$request(\"/login/cellphone\", {\n        phone: this.loginForm.phoneNum,\n        password: this.loginForm.password,\n        withCredentials: true,\n        timestamp,\n      });\n      // console.log(result);\n      // 登录成功\n      if (result.data.code == 200) {\n        // 将请求到的用户id存入localstorage\n        // 在index.vue 和 bottomControl.vue中用到过\n        window.localStorage.setItem(\"userId\", result.data.profile.userId);\n        // this.userInfo = result.data.profile;\n        // 将userInfo传回父组件\n        this.$emit(\"getUserInfo\", result.data.profile);\n\n        this.$message.success(\"登录成功!\");\n        // 刷新页面\n        // this.$router.go(0);\n        // 修改vuex中的登录状态\n        this.$store.commit(\"updataLoginState\", true);\n      } else if (result.data.code == 400) {\n        // 手机号错误\n        this.$message.error(\"手机号错误!\");\n        return;\n      } else if (result.data.code == 502) {\n        // 密码错误\n        this.$message.error(\"密码错误!\");\n        return;\n      } else {\n        // 登录失败，请稍后重试\n        this.$message.error(\"登录失败，请稍后重试!\");\n        return;\n      }\n\n      // 清空输入框的内容\n      this.loginForm.password = \"\";\n      this.loginForm.phoneNum = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.regEnter {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  cursor: pointer;\n  margin: 15px auto 0;\n}\n\n.regEnter:hover {\n  text-decoration: underline;\n}\n\n.loginInput {\n  height: 25px;\n  border-radius: 5px;\n  outline: none;\n  border: 1px solid #999;\n  padding-left: 5px;\n  width: 175px;\n}\n\n.el-form {\n  padding-top: 10px;\n}\n\n.loginButton {\n  width: 100%;\n  text-align: center;\n}\n\n.loginButton .el-button {\n  width: 200px;\n}\n</style>\n"]}]}