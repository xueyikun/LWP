{"remainingRequest":"D:\\GH\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GH\\LWP\\light-weightplayer\\src\\views\\personal\\Personal.vue?vue&type=style&index=0&id=e7daf1b6&scoped=true&lang=css&","dependencies":[{"path":"D:\\GH\\LWP\\light-weightplayer\\src\\views\\personal\\Personal.vue","mtime":1632135031000},{"path":"D:\\GH\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636408356404},{"path":"D:\\GH\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636408358142},{"path":"D:\\GH\\node_modules\\postcss-loader\\src\\index.js","mtime":1636408357193},{"path":"D:\\GH\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\GH\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5QZXJzb25hbCB7CiAgaGVpZ2h0OiBjYWxjKDgwdmggLSAxMDVweCk7CiAgb3ZlcmZsb3cteTogc2Nyb2xsOwp9CgoudXNlckluZm8gewogIG1hcmdpbjogMzBweCAxMHB4OwogIGRpc3BsYXk6IGZsZXg7Cn0KCi5hdmF0YXIgewogIG1hcmdpbi10b3A6IDVweDsKICBoZWlnaHQ6IDE1MHB4OwogIHdpZHRoOiAxNTBweDsKICBvYmplY3QtZml0OiBjb3ZlcjsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCi5yaWdodCB7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgZmxleDogMTsKfQoKLnVzZXJuYW1lIHsKICBjb2xvcjogIzM3MzczNzsKICBmb250LXNpemU6IDIycHg7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KCi5sb2dvdXQgewogIG1hcmdpbi1yaWdodDogMTBweDsKICBjb2xvcjogIzM3MzczNzsKICBoZWlnaHQ6IDMwcHg7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZvbnQtd2VpZ2h0OiBsaWdodGVyOwogIHBhZGRpbmc6IDAgMTVweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogIHRyYW5zZm9ybTogc2NhbGUoMC45KTsKfQoKLmxvZ291dDpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsKfQoKLmxvZ291dCBpIHsKICBmb250LXNpemU6IDEycHg7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KCi5sb2dvdXQgc3BhbiB7CiAgZm9udC1zaXplOiAxMnB4Owp9CgoudGFncyB7CiAgZGlzcGxheTogZmxleDsKICBtYXJnaW46IDEwcHggMDsKfQoKLmxldmVsIHsKICBmb250LXNpemU6IDEycHg7CiAgdHJhbnNmb3JtOiBzY2FsZSgwLjgpIHRyYW5zbGF0ZVgoLTEwJSk7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsKICB3aWR0aDogMTAwOwogIHBhZGRpbmc6IDJweCA4cHg7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBjb2xvcjogIzM3MzczNzsKfQoKLnJpZ2h0VG9wIHsKICB3aWR0aDogMTAwJTsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsKfQoKLmRhdGFOdW1zIHsKICBkaXNwbGF5OiBmbGV4OwogIG1hcmdpbjogMTBweCAwIDVweDsKfQoKLm51bUl0ZW0gewogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VlZTsKICBwYWRkaW5nOiAwIDI1cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLm51bUl0ZW06bnRoLWNoaWxkKDEpIHsKICBib3JkZXItbGVmdDogbm9uZTsKICBwYWRkaW5nLWxlZnQ6IDNweDsKfQoKLm51bUl0ZW1Ub3AgewogIGNvbG9yOiAjMzczNzM3OwogIGZvbnQtc2l6ZTogMThweDsKfQoKLm51bUl0ZW1Cb3R0b20gewogIGZvbnQtc2l6ZTogMTJweDsKICB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7Cn0KCi5vdGhlckluZm8gewogIGZvbnQtc2l6ZTogMTJweDsKICB0cmFuc2Zvcm06IHNjYWxlKDAuOSkgdHJhbnNsYXRlWCgtNSUpOwogIHVzZXItc2VsZWN0OiB0ZXh0ICFpbXBvcnRhbnQ7Cn0KCi5vdGhlckluZm9JdGVtIHsKICBkaXNwbGF5OiBmbGV4OwogIG1hcmdpbjogNXB4IDA7Cn0KCi5vdGhlckluZm9LZXkgewogIGNvbG9yOiAjMmUyZTJlOwp9Cgoub3RoZXJJbmZvVmFsdWUgewogIHdpZHRoOiA4MCU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CgoubXVzaWNMaXN0VGl0bGUgewogIGNvbG9yOiAjMzczNzM3OwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIGZvbnQtc2l6ZTogMTRweDsKfQoKLm11c2ljTGlzdCB7CiAgbWF4LXdpZHRoOiAxMTAwcHg7CiAgbWFyZ2luOiAwIGF1dG87CiAgcGFkZGluZy1ib3R0b206IDMwcHg7Cn0K"},{"version":3,"sources":["Personal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Personal.vue","sourceRoot":"src/views/personal","sourcesContent":["<template>\n  <div class=\"Personal\">\n    <div class=\"userInfo\" v-if=\"userInfo.avatarUrl\">\n      <div class=\"left\">\n        <img\n          :src=\"userInfo.avatarUrl + '?param=400y400'\"\n          alt=\"\"\n          class=\"avatar\"\n        />\n      </div>\n      <div class=\"right\">\n        <div class=\"rightTop\">\n          <div class=\"username\">\n            <div>{{ userInfo.nickname }}</div>\n            <div\n              class=\"logout\"\n              @click=\"logout\"\n              v-if=\"isCurrentUser && this.$store.state.isLogin\"\n            >\n              <i class=\"iconfont icon-zhuxiao1\"></i>\n              <span>退出登录</span>\n            </div>\n          </div>\n          <div class=\"tags\">\n            <div class=\"level\">{{ \"Lv\" + userInfo.level }}</div>\n            <div class=\"gender\">\n              <!-- 0 保密 1男 2女 -->\n            </div>\n          </div>\n        </div>\n        <div class=\"rightBottom\">\n          <!-- 动态 关注 粉丝 -->\n          <div class=\"dataNums\">\n            <div class=\"numItem\">\n              <div class=\"numItemTop\">{{ userInfo.eventCount }}</div>\n              <div class=\"numItemBottom\">动态</div>\n            </div>\n            <div\n              class=\"numItem\"\n              @click=\"\n                $router.push({\n                  name: 'follows',\n                  params: { uid: $route.params.uid },\n                })\n              \"\n            >\n              <div class=\"numItemTop\">{{ userInfo.newFollows }}</div>\n              <div class=\"numItemBottom\">关注</div>\n            </div>\n            <div\n              class=\"numItem\"\n              @click=\"\n                $router.push({\n                  name: 'followeds',\n                  params: { uid: $route.params.uid },\n                })\n              \"\n            >\n              <div class=\"numItemTop\">{{ userInfo.followeds }}</div>\n              <div class=\"numItemBottom\">粉丝</div>\n            </div>\n          </div>\n          <!-- 其它信息 -->\n          <div class=\"otherInfo\">\n            <div class=\"otherInfoItem\">\n              <div class=\"otherInfoKey\">用户id：</div>\n              <div class=\"ptherInfoValue\">{{ userInfo.userId }}</div>\n            </div>\n            <div class=\"otherInfoItem\">\n              <div class=\"otherInfoKey\">所在地区：</div>\n              <div class=\"ptherInfoValue\">\n                {{ userInfo.province + \" \" + userInfo.city }}\n              </div>\n            </div>\n            <div class=\"otherInfoItem\">\n              <div class=\"otherInfoKey\">个人介绍：</div>\n              <div class=\"ptherInfoValue\">\n                {{ userInfo.signature == \"\" ? \"暂无介绍\" : userInfo.signature }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 歌单 -->\n    <div class=\"musicList\">\n      <div class=\"musicListTitle\" v-if=\"createdMusicList.length != 0\">\n        {{ userInfo.nickname }}创建的歌单({{ createdMusicList.length }})\n      </div>\n      <list-card\n        :listCardData=\"createdMusicList\"\n        @clickListCardItem=\"clickListCardItem\"\n      ></list-card>\n      <div class=\"musicListTitle\" v-if=\"collectedMusicList.length != 0\">\n        {{ userInfo.nickname }}收藏的歌单({{ collectedMusicList.length }})\n      </div>\n      <list-card\n        :listCardData=\"collectedMusicList\"\n        @clickListCardItem=\"clickListCardItem\"\n      ></list-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ListCard from \"components/listCard/ListCard.vue\";\nexport default {\n  components: { ListCard },\n  name: \"Personal\",\n  data() {\n    return {\n      // 用户信息\n      userInfo: {},\n      // 创建的歌单\n      createdMusicList: [],\n      // 收藏的歌单\n      collectedMusicList: [],\n      // 该用户是否为当前用户\n      isCurrentUser: false,\n    };\n  },\n  methods: {\n    // 请求\n    // 获取用户信息\n    async getUserInfo() {\n      let res = await this.$request(\n        `/user/detail?uid=${this.$route.params.uid}`\n      );\n      if (!res) {\n        this.$message.error(\"获取用户信息失败!\");\n        return;\n      }\n      // console.log(res);\n      res.data.profile[\"level\"] = res.data.level;\n      this.userInfo = res.data.profile;\n    },\n\n    // 请求用户歌单\n    async getUserMusicList() {\n      let timestamp = Date.parse(new Date());\n      // 先从localStorage里面读取用户信息  如果登录成功是有存的\n      let res = await this.$request(\"/user/playlist\", {\n        uid: this.$route.params.uid,\n        timestamp,\n      });\n      console.log(res);\n      // 对数据进行处理分类\n      res = res.data.playlist;\n      let index = res.findIndex((item) => item.subscribed == true);\n      res[0].name = `${this.userInfo.nickname}喜欢的音乐`;\n      this.createdMusicList = res.slice(0, index);\n      this.collectedMusicList = res.slice(index);\n    },\n\n    // 事件\n    // 点击歌单的回调\n    clickListCardItem(id) {\n      this.$router.push({ name: \"musicListDetail\", params: { id } });\n    },\n\n    // 点击退出登录的回调\n    async logout() {\n      let res = await this.$request(\"/logout\");\n      // console.log(res);\n\n      if (res.data.code != 200) {\n        this.$message(\"退出登录失败, 请稍后重试!\");\n        return;\n      }\n\n      // 清空data和localstorage中的数据，以及cookie\n      // window.localStorage.setItem(\"userInfo\", \"\");\n      // this.clearAllCookie();\n      // 删除localstoarge的userId\n      window.localStorage.removeItem(\"userId\");\n      //   在vuex中更新登录状态\n      this.$store.commit(\"updataLoginState\", false);\n      this.$message.success(\"退出成功!\");\n      this.isCurrentUser = false;\n    },\n  },\n  watch: {\n    \"$store.state.isLogin\"(current) {\n      if (window.localStorage.getItem(\"userId\") && current) {\n        this.isCurrentUser =\n          window.localStorage.getItem(\"userId\") == this.$route.params.uid;\n      }\n    },\n  },\n  async created() {\n    await this.getUserInfo();\n    this.getUserMusicList();\n    // 判断该用户是不是当前登录用户\n    if (window.localStorage.getItem(\"userId\")) {\n      this.isCurrentUser =\n        window.localStorage.getItem(\"userId\") == this.$route.params.uid;\n    }\n  },\n};\n</script>\n\n<style scoped>\n.Personal {\n  height: calc(80vh - 105px);\n  overflow-y: scroll;\n}\n\n.userInfo {\n  margin: 30px 10px;\n  display: flex;\n}\n\n.avatar {\n  margin-top: 5px;\n  height: 150px;\n  width: 150px;\n  object-fit: cover;\n  border-radius: 50%;\n}\n\n.right {\n  margin-left: 20px;\n  flex: 1;\n}\n\n.username {\n  color: #373737;\n  font-size: 22px;\n  font-weight: bold;\n  display: flex;\n  justify-content: space-between;\n}\n\n.logout {\n  margin-right: 10px;\n  color: #373737;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  cursor: pointer;\n  font-weight: lighter;\n  padding: 0 15px;\n  border: 1px solid #ddd;\n  transform: scale(0.9);\n}\n\n.logout:hover {\n  background-color: #f2f2f2;\n}\n\n.logout i {\n  font-size: 12px;\n  margin-right: 3px;\n}\n\n.logout span {\n  font-size: 12px;\n}\n\n.tags {\n  display: flex;\n  margin: 10px 0;\n}\n\n.level {\n  font-size: 12px;\n  transform: scale(0.8) translateX(-10%);\n  background-color: #f0f0f0;\n  width: 100;\n  padding: 2px 8px;\n  border-radius: 10px;\n  color: #373737;\n}\n\n.rightTop {\n  width: 100%;\n  border-bottom: 1px solid #ddd;\n}\n\n.dataNums {\n  display: flex;\n  margin: 10px 0 5px;\n}\n\n.numItem {\n  border-left: 1px solid #eee;\n  padding: 0 25px;\n  text-align: center;\n  cursor: pointer;\n}\n\n.numItem:nth-child(1) {\n  border-left: none;\n  padding-left: 3px;\n}\n\n.numItemTop {\n  color: #373737;\n  font-size: 18px;\n}\n\n.numItemBottom {\n  font-size: 12px;\n  transform: scale(0.8);\n}\n\n.otherInfo {\n  font-size: 12px;\n  transform: scale(0.9) translateX(-5%);\n  user-select: text !important;\n}\n\n.otherInfoItem {\n  display: flex;\n  margin: 5px 0;\n}\n\n.otherInfoKey {\n  color: #2e2e2e;\n}\n\n.otherInfoValue {\n  width: 80%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.musicListTitle {\n  color: #373737;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n.musicList {\n  max-width: 1100px;\n  margin: 0 auto;\n  padding-bottom: 30px;\n}\n</style>\n"]}]}