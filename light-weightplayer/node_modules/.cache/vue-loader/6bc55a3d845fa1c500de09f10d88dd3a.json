{"remainingRequest":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_cloud_music-master\\light-webplayer\\src\\components\\login\\Login.vue?vue&type=style&index=0&id=08b4fdc3&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue_cloud_music-master\\light-webplayer\\src\\components\\login\\Login.vue","mtime":1636485287760},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636408356404},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636408358142},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\postcss-loader\\src\\index.js","mtime":1636408357193},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucmVnRW50ZXIgewogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBmb250LXNpemU6IDEycHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIG1hcmdpbjogMTVweCBhdXRvIDA7Cn0KCi5yZWdFbnRlcjpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCi5sb2dpbklucHV0IHsKICBoZWlnaHQ6IDI1cHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIG91dGxpbmU6IG5vbmU7CiAgYm9yZGVyOiAxcHggc29saWQgIzk5OTsKICBwYWRkaW5nLWxlZnQ6IDVweDsKICB3aWR0aDogMTc1cHg7Cn0KCi5lbC1mb3JtIHsKICBwYWRkaW5nLXRvcDogMTBweDsKfQoKLmxvZ2luQnV0dG9uIHsKICB3aWR0aDogMTAwJTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5sb2dpbkJ1dHRvbiAuZWwtYnV0dG9uIHsKICB3aWR0aDogMjAwcHg7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/login","sourcesContent":["<template>\n  <div class=\"Login\">\n    <el-form\n      ref=\"form\"\n      v-model=\"loginForm\"\n      label-width=\"80px\"\n      label-position=\"right\"\n      size=\"mini\"\n    >\n      <el-form-item label=\"手机号码：\" size=\"mini\" label-width=\"100px\" required>\n        <input type=\"text\" v-model=\"loginForm.phoneNum\" class=\"loginInput\" />\n      </el-form-item>\n      <el-form-item label=\"密码：\" size=\"mini\" label-width=\"100px\" required>\n        <input\n          type=\"password\"\n          v-model=\"loginForm.password\"\n          class=\"loginInput\"\n        />\n      </el-form-item>\n      <div class=\"loginButton\">\n        <el-button type=\"danger\" @click=\"login\" size=\"mini\">登录</el-button>\n      </div>\n      <div class=\"regEnter\" @click=\"isRegisteredShow = true\">注册</div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loginForm: {\n        password: \"\",\n        phoneNum: \"\",\n      },\n    };\n  },\n  methods: {\n    // 事件\n    // 点击登录按钮的回调\n    login() {\n      this.loginByCellphone();\n    },\n\n    //   手机登录请求\n    async loginByCellphone() {\n      let timestamp = Date.parse(new Date());\n      let result = await this.$request(\"/login/cellphone\", {\n        phone: this.loginForm.phoneNum,\n        password: this.loginForm.password,\n        withCredentials: true,\n        timestamp,\n      });\n      // console.log(result);\n      // 登录成功\n      if (result.data.code == 200) {\n        // 将请求到的用户id存入localstorage\n        // 在index.vue 和 bottomControl.vue中用到过\n        window.localStorage.setItem(\"userId\", result.data.profile.userId);\n        // this.userInfo = result.data.profile;\n        // 将userInfo传回父组件\n        this.$emit(\"getUserInfo\", result.data.profile);\n\n        this.$message.success(\"登录成功!\");\n        // 刷新页面\n        // this.$router.go(0);\n        // 修改vuex中的登录状态\n        this.$store.commit(\"updataLoginState\", true);\n      } else if (result.data.code == 400) {\n        // 手机号错误\n        this.$message.error(\"手机号错误!\");\n        return;\n      } else if (result.data.code == 502) {\n        // 密码错误\n        this.$message.error(\"密码错误!\");\n        return;\n      } else {\n        // 登录失败，请稍后重试\n        this.$message.error(\"登录失败，请稍后重试!\");\n        return;\n      }\n\n      // 清空输入框的内容\n      this.loginForm.password = \"\";\n      this.loginForm.phoneNum = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.regEnter {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  cursor: pointer;\n  margin: 15px auto 0;\n}\n\n.regEnter:hover {\n  text-decoration: underline;\n}\n\n.loginInput {\n  height: 25px;\n  border-radius: 5px;\n  outline: none;\n  border: 1px solid #999;\n  padding-left: 5px;\n  width: 175px;\n}\n\n.el-form {\n  padding-top: 10px;\n}\n\n.loginButton {\n  width: 100%;\n  text-align: center;\n}\n\n.loginButton .el-button {\n  width: 200px;\n}\n</style>\n"]}]}