{"remainingRequest":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\light-weightPlayer\\light-weightplayer\\src\\views\\recommendMusic\\RecommendMusic.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\light-weightPlayer\\light-weightplayer\\src\\views\\recommendMusic\\RecommendMusic.vue","mtime":1636676228523},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\babel-loader\\lib\\index.js","mtime":1636408357214},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\light-weightPlayer\\light-weightplayer\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGhhbmRsZU11c2ljVGltZSB9IGZyb20gInBsdWdpbnMvdXRpbHMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZWNvbW1lbmRNdXNpYyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOavj+aXpeaOqOiNkOatjOabsuWIl+ihqAogICAgICByZWNvbW1lbmRNdXNpYzogW10sCiAgICAgIC8vICAg5q+P5pel5o6o6I2QaWQg77yI6Ieq5bex6LW355qE77yM55So5LqO5LiK5LygdnVleOW9k211c2ljTGlzdElk77yM5Y+q5piv5L2c5Li65LiA5Liq5ZSv5LiA5qCH6K+G77yJCiAgICAgIHJlY29tbWVuZE11c2ljTGlzdElkOiAicmVjb21tZW5kTXVzaWMiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vICAg6K+35rGCCiAgICAvLyDojrflj5bmr4/ml6XmjqjojZDmrYzmm7IKICAgIGFzeW5jIGdldFJlY29tbWVuZE11c2ljKCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kcmVxdWVzdCgiL3JlY29tbWVuZC9zb25ncyIpOwogICAgICB0aGlzLnJlY29tbWVuZE11c2ljID0gcmVzLmRhdGEuZGF0YS5kYWlseVNvbmdzOwogICAgICAvLyDlpITnkIbml7bpl7QKICAgICAgdGhpcy5yZWNvbW1lbmRNdXNpYy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgIHRoaXMucmVjb21tZW5kTXVzaWNbaW5kZXhdLmR0ID0gaGFuZGxlTXVzaWNUaW1lKGl0ZW0uZHQpOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g5LqL5Lu2CiAgICAvLyDngrnlh7vmkq3mlL7lhajpg6jmjInpkq7nmoTlm57osIMKICAgIHBsYXlBbGwoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVjb21tZW5kTXVzaWMpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZU11c2ljSWQiLCB0aGlzLnJlY29tbWVuZE11c2ljWzBdLmlkKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNdXNpY0xpc3QiLCB7CiAgICAgICAgbXVzaWNMaXN0OiB0aGlzLnJlY29tbWVuZE11c2ljLAogICAgICAgIG11c2ljTGlzdElkOiB0aGlzLnJlY29tbWVuZE11c2ljTGlzdElkLAogICAgICB9KTsKICAgIH0sCiAgICAvLyDlpITnkIZ0YWJsZee0ouW8lQogICAgaGFuZGxlSW5kZXgoaW5kZXgpIHsKICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgpOwogICAgICBpbmRleCArPSAxOwogICAgICBpZiAoaW5kZXggPCAxMCkgewogICAgICAgIHJldHVybiAiMCIgKyBpbmRleDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gaW5kZXg7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlj4zlh7t0YWJsZeeahHJvd+eahOWbnuiwgwogICAgLy8g5pKt5pS+6Z+z5LmQ55qE6YC76L6R5pON5L2cCiAgICBhc3luYyBjbGlja1Jvdyhyb3cpIHsKICAgICAgLy8gY29uc29sZS5sb2cocm93KTsKICAgICAgLy8g5bCGbXVzaWNJZOaPkOS6pOWIsHZ1ZXjkuK0g5L6bYm90dG9tQ29udHJvbOafpeivouatjOabsnVybOWSjOWFtuWug+aTjeS9nAogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZU11c2ljSWQiLCByb3cuaWQpOwogICAgICAvLyDlpoLmnpzmrYzljZXlj5HnlJ/lj5jljJYs5YiZ5o+Q5Lqk5q2M5Y2V5YiwdnVleAogICAgICBpZiAodGhpcy5yZWNvbW1lbmRNdXNpY0xpc3RJZCAhPSB0aGlzLiRzdG9yZS5zdGF0ZS5tdXNpY0xpc3RJZCkgewogICAgICAgIC8vIOWwhuatjOWNleS8oOWIsHZ1ZXgKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZU11c2ljTGlzdCIsIHsKICAgICAgICAgIG11c2ljTGlzdDogdGhpcy5yZWNvbW1lbmRNdXNpYywKICAgICAgICAgIG11c2ljTGlzdElkOiB0aGlzLnJlY29tbWVuZE11c2ljTGlzdElkLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIC8vIOaTjeS9nCBET00KICAgIGhhbmRsZURPTShjdXJyZW50LCBsYXN0KSB7CiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucmVjb21tZW5kTXVzaWMiKSkgewogICAgICAgIGxldCB0YWJsZVJvd3MgPSBkb2N1bWVudAogICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoIi5yZWNvbW1lbmRNdXNpYyIpCiAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgiLmVsLXRhYmxlX19yb3ciKTsKICAgICAgICAvLyDpgY3ljoblvZPliY1tdXNpY0xpc3Qg5om+5Yiw5b2T5YmN5pKt5pS+55qEaW5kZXjnmoTooYzov5vooYzmuLLmn5MKICAgICAgICAvLyBjb25zb2xlLmxvZyh0YWJsZVJvd3MpOwogICAgICAgIGxldCBpbmRleCA9IHRoaXMucmVjb21tZW5kTXVzaWMuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLmlkID09IGN1cnJlbnQpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTsKICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgIC8vIOebtOaOpeS/ruaUuWRvbeagt+W8j+eahOminOiJsuaXoOaViAogICAgICAgICAgLy8g6YCa6L+H5byV5YWl5YWo5bGA5qC35byP6Kej5YazCiAgICAgICAgICAvLyDlsIbmraPlnKjmkq3mlL7nmoTpn7PkuZDliY3pnaLnmoTntKLlvJXmjaLmiJDlsI/lloflj60KICAgICAgICAgIHRhYmxlUm93c1tpbmRleF0uY2hpbGRyZW5bMF0ucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgIi5jZWxsIgogICAgICAgICAgKS5pbm5lckhUTUwgPSBgPGRpdj48aSBjbGFzcz0iaWNvbmZvbnQgaWNvbi15aW5saWFuZyI+PC9pPjwvZGl2PmA7CiAgICAgICAgICB0YWJsZVJvd3NbaW5kZXhdLmNoaWxkcmVuWzBdCiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCIuaWNvbmZvbnQiKQogICAgICAgICAgICAuY2xhc3NMaXN0LmFkZCgiY3VycmVudFJvdyIpOwogICAgICAgICAgdGFibGVSb3dzW2luZGV4XS5jaGlsZHJlblsyXQogICAgICAgICAgICAucXVlcnlTZWxlY3RvcigiLmNlbGwiKQogICAgICAgICAgICAuY2xhc3NMaXN0LmFkZCgiY3VycmVudFJvdyIpOwogICAgICAgIH0KICAgICAgICAvLyDmuIXpmaTkuIrkuIDpppbnmoTmoLflvI8KICAgICAgICBpZiAobGFzdCAhPSAtMSkgewogICAgICAgICAgbGV0IGxhc3RJbmRleCA9IHRoaXMucmVjb21tZW5kTXVzaWMuZmluZEluZGV4KAogICAgICAgICAgICAoaXRlbSkgPT4gaXRlbS5pZCA9PSBsYXN0CiAgICAgICAgICApOwogICAgICAgICAgaWYgKGxhc3RJbmRleCAhPSAtMSkgewogICAgICAgICAgICAvLyDlsIbkuIrkuIDkuKrmkq3mlL7nmoRkb23nmoTlsI/lloflj63mjaLlm57ntKLlvJUKICAgICAgICAgICAgdGFibGVSb3dzW2xhc3RJbmRleF0uY2hpbGRyZW5bMF0ucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgICAiLmNlbGwiCiAgICAgICAgICAgICkuaW5uZXJIVE1MID0gYDxkaXY+JHsKICAgICAgICAgICAgICBsYXN0SW5kZXggKyAxIDwgMTAgPyAiMCIgKyAobGFzdEluZGV4ICsgMSkgOiBsYXN0SW5kZXggKyAxCiAgICAgICAgICAgIH08L2Rpdj5gOwoKICAgICAgICAgICAgLy8g5bCG5LiK5LiA6aaW55qE57G75ZCN5Yig5o6JICDlsI/lloflj63nmoRodG1s5bey57uP6KKr5pu/5o2i5LqG77yM5LiN6ZyA6KaB5YaN6L+Y5Y6fCiAgICAgICAgICAgIHRhYmxlUm93c1tsYXN0SW5kZXhdLmNoaWxkcmVuWzJdCiAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoIi5jZWxsIikKICAgICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgiY3VycmVudFJvdyIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBhc3luYyBjbGlja0NlbGwocm93LCBjb2x1bW4sIGNlbGwpIHsKICAgICAgLy8g5Yik5pat54K55Ye755qE5piv5LiL6L295oyJ6ZKuCiAgICAgIGlmIChjZWxsLnF1ZXJ5U2VsZWN0b3IoIi5pY29uLWRvd25sb2FkIikpIHsKICAgICAgICAvLyDor7fmsYLor6XmrYzmm7LnmoR1cmwKICAgICAgICBjb25zb2xlLmxvZyhyb3cpOwogICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRyZXF1ZXN0KCIvc29uZy91cmwiLCB7IGlkOiByb3cuaWQgfSk7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YVswXS51cmwpOwogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGFbMF0udXJsID09IG51bGwpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5pqC5pe25peg5rOV6I635Y+W6K+l6LWE5rqQ5ZOmISIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8g5Yy56YWN6LWE5rqQ55qE5Z+f5ZCNCiAgICAgICAgbGV0IHVybCA9IHJlcy5kYXRhLmRhdGFbMF0udXJsLm1hdGNoKC9caHR0cC4qP1wubmV0Lyk7CiAgICAgICAgLy8g5Yy56YWN5Z+f5ZCN5ZCN56ew77yM5bm25Yy56YWN5a+55bqU55qE5Luj55CGCiAgICAgICAgbGV0IHNlcnZlID0gdXJsWzBdLm1hdGNoKC9odHRwOlwvKFxTKikubXVzaWMvKVsxXTsKICAgICAgICBpZiAoCiAgICAgICAgICBzZXJ2ZSAhPSAiL203IiAmJgogICAgICAgICAgc2VydmUgIT0gIi9tNzAxIiAmJgogICAgICAgICAgc2VydmUgIT0gIi9tOCIgJiYKICAgICAgICAgIHNlcnZlICE9ICIvbTgwMSIKICAgICAgICApIHsKICAgICAgICAgIC8vIOayoeacieWvueW6lOeahOS7o+eQhgogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yy56YWN5LiN5Yiw5a+55bqU55qE5Luj55CGLOS4i+i9veWksei0pSEiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8g5oiq5Y+W5ZCO6Z2i55qE5Y+C5pWwCiAgICAgICAgbGV0IHBhcmFtcyA9IHJlcy5kYXRhLmRhdGFbMF0udXJsLnNsaWNlKHVybFswXS5sZW5ndGgpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHVybFswXSwgc2VydmUsIHBhcmFtcyk7CgogICAgICAgIGxldCBkb3dubG9hZE11c2ljSW5mbyA9IHsKICAgICAgICAgIHVybDogc2VydmUgKyBwYXJhbXMsCiAgICAgICAgICBuYW1lOgogICAgICAgICAgICByb3cubmFtZSArCiAgICAgICAgICAgICIgLSAiICsKICAgICAgICAgICAgcm93LmFyWzBdLm5hbWUgKwogICAgICAgICAgICAiLiIgKwogICAgICAgICAgICByZXMuZGF0YS5kYXRhWzBdLnR5cGUudG9Mb3dlckNhc2UoKSwKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKGRvd25sb2FkTXVzaWNJbmZvKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZURvd25sb2FkTXVzaWNJbmZvIiwgZG93bmxvYWRNdXNpY0luZm8pOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUuaXNMb2dpbikgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlj6rmnInnmbvlvZXlkI7miY3og73ov5vlhaXmr4/ml6XmjqjojZDpobXpnaLlk6YhIik7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvZGlzY292ZXIiKTsKICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuaXNMb2dpbikgewogICAgICBhd2FpdCB0aGlzLmdldFJlY29tbWVuZE11c2ljKCk7CiAgICAgIC8vIOWIpOaWreaYr+WQpuWSjOS4iuS4gOasoeaJk+W8gOeahOatjOWNleebuOWQjAogICAgICBpZiAodGhpcy5yZWNvbW1lbmRNdXNpY0xpc3RJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5tdXNpY0xpc3RJZCkgewogICAgICAgIHRoaXMuaGFuZGxlRE9NKHRoaXMuJHN0b3JlLnN0YXRlLm11c2ljSWQpOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgIiRzdG9yZS5zdGF0ZS5tdXNpY0lkIihjdXJyZW50LCBsYXN0KSB7CiAgICAgIHRoaXMuaGFuZGxlRE9NKGN1cnJlbnQsIGxhc3QpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["RecommendMusic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecommendMusic.vue","sourceRoot":"src/views/recommendMusic","sourcesContent":["<template>\n  <div class=\"recommendMusic\">\n    <!-- 每日推荐歌曲信息 -->\n    <div class=\"recommendInfo\">\n      <div class=\"title\">\n        <div class=\"cover\">\n          <img src=\"~assets/img/recommend.jpg\" alt=\"\" />\n        </div>\n        <div class=\"titleInfo\">\n          <div class=\"infoTop\">每日推荐歌曲</div>\n          <div class=\"infoBottom\">由你的音乐口味生成，每天0:00更新</div>\n        </div>\n      </div>\n      <!-- 操作按钮 -->\n      <div class=\"buttons\">\n        <div class=\"buttonItem playAll\" @click=\"playAll\">\n          <i class=\"iconfont icon-bofang playAll\"></i>\n          <span>播放全部</span>\n        </div>\n        <div class=\"buttonItem\">\n          <i class=\"iconfont icon-xihuan\"></i>\n          <span>收藏全部</span>\n        </div>\n      </div>\n    </div>\n    <!-- 歌曲列表 -->\n    <div v-if=\"recommendMusic.length != 0\">\n      <!-- 表格 -->\n      <el-table\n        :data=\"recommendMusic\"\n        size=\"mini\"\n        style=\"width: 100%\"\n        @row-dblclick=\"clickRow\"\n        @cell-click=\"clickCell\"\n        highlight-current-row\n        stripe\n        lazy\n      >\n        <el-table-column label=\"\" width=\"30\" type=\"index\" :index=\"handleIndex\">\n        </el-table-column>\n        <el-table-column label=\"\" width=\"23\">\n          <!-- 下载按钮 -->\n          <i class=\"iconfont icon-download\"></i>\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"音乐标题\" min-width=\"350\">\n        </el-table-column>\n        <el-table-column prop=\"ar[0].name\" label=\"歌手\" min-width=\"120\">\n        </el-table-column>\n        <el-table-column prop=\"al.name\" label=\"专辑\" min-width=\"170\">\n        </el-table-column>\n        <el-table-column prop=\"dt\" label=\"时长\" min-width=\"100\">\n        </el-table-column>\n      </el-table>\n      <div class=\"placeholder\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { handleMusicTime } from \"plugins/utils\";\n\nexport default {\n  name: \"RecommendMusic\",\n  data() {\n    return {\n      // 每日推荐歌曲列表\n      recommendMusic: [],\n      //   每日推荐id （自己起的，用于上传vuex当musicListId，只是作为一个唯一标识）\n      recommendMusicListId: \"recommendMusic\",\n    };\n  },\n  methods: {\n    //   请求\n    // 获取每日推荐歌曲\n    async getRecommendMusic() {\n      let res = await this.$request(\"/recommend/songs\");\n      this.recommendMusic = res.data.data.dailySongs;\n      // 处理时间\n      this.recommendMusic.forEach((item, index) => {\n        this.recommendMusic[index].dt = handleMusicTime(item.dt);\n      });\n    },\n\n    // 事件\n    // 点击播放全部按钮的回调\n    playAll() {\n      console.log(this.recommendMusic);\n      this.$store.commit(\"updateMusicId\", this.recommendMusic[0].id);\n      this.$store.commit(\"updateMusicList\", {\n        musicList: this.recommendMusic,\n        musicListId: this.recommendMusicListId,\n      });\n    },\n    // 处理table索引\n    handleIndex(index) {\n      // console.log(index);\n      index += 1;\n      if (index < 10) {\n        return \"0\" + index;\n      } else {\n        return index;\n      }\n    },\n    // 双击table的row的回调\n    // 播放音乐的逻辑操作\n    async clickRow(row) {\n      // console.log(row);\n      // 将musicId提交到vuex中 供bottomControl查询歌曲url和其它操作\n      this.$store.commit(\"updateMusicId\", row.id);\n      // 如果歌单发生变化,则提交歌单到vuex\n      if (this.recommendMusicListId != this.$store.state.musicListId) {\n        // 将歌单传到vuex\n        this.$store.commit(\"updateMusicList\", {\n          musicList: this.recommendMusic,\n          musicListId: this.recommendMusicListId,\n        });\n      }\n    },\n\n    // 操作 DOM\n    handleDOM(current, last) {\n      if (document.querySelector(\".recommendMusic\")) {\n        let tableRows = document\n          .querySelector(\".recommendMusic\")\n          .querySelectorAll(\".el-table__row\");\n        // 遍历当前musicList 找到当前播放的index的行进行渲染\n        // console.log(tableRows);\n        let index = this.recommendMusic.findIndex((item) => item.id == current);\n        // console.log(index);\n        if (index != -1) {\n          // 直接修改dom样式的颜色无效\n          // 通过引入全局样式解决\n          // 将正在播放的音乐前面的索引换成小喇叭\n          tableRows[index].children[0].querySelector(\n            \".cell\"\n          ).innerHTML = `<div><i class=\"iconfont icon-yinliang\"></i></div>`;\n          tableRows[index].children[0]\n            .querySelector(\".iconfont\")\n            .classList.add(\"currentRow\");\n          tableRows[index].children[2]\n            .querySelector(\".cell\")\n            .classList.add(\"currentRow\");\n        }\n        // 清除上一首的样式\n        if (last != -1) {\n          let lastIndex = this.recommendMusic.findIndex(\n            (item) => item.id == last\n          );\n          if (lastIndex != -1) {\n            // 将上一个播放的dom的小喇叭换回索引\n            tableRows[lastIndex].children[0].querySelector(\n              \".cell\"\n            ).innerHTML = `<div>${\n              lastIndex + 1 < 10 ? \"0\" + (lastIndex + 1) : lastIndex + 1\n            }</div>`;\n\n            // 将上一首的类名删掉  小喇叭的html已经被替换了，不需要再还原\n            tableRows[lastIndex].children[2]\n              .querySelector(\".cell\")\n              .classList.remove(\"currentRow\");\n          }\n        }\n      }\n    },\n\n    async clickCell(row, column, cell) {\n      // 判断点击的是下载按钮\n      if (cell.querySelector(\".icon-download\")) {\n        // 请求该歌曲的url\n        console.log(row);\n        let res = await this.$request(\"/song/url\", { id: row.id });\n        console.log(res.data.data[0].url);\n        console.log(res);\n        if (res.data.data[0].url == null) {\n          this.$message.warning(\"暂时无法获取该资源哦!\");\n          return;\n        }\n\n        // 匹配资源的域名\n        let url = res.data.data[0].url.match(/\\http.*?\\.net/);\n        // 匹配域名名称，并匹配对应的代理\n        let serve = url[0].match(/http:\\/(\\S*).music/)[1];\n        if (\n          serve != \"/m7\" &&\n          serve != \"/m701\" &&\n          serve != \"/m8\" &&\n          serve != \"/m801\"\n        ) {\n          // 没有对应的代理\n          this.$message.error(\"匹配不到对应的代理,下载失败!\");\n          return;\n        }\n        // 截取后面的参数\n        let params = res.data.data[0].url.slice(url[0].length);\n        // console.log(url[0], serve, params);\n\n        let downloadMusicInfo = {\n          url: serve + params,\n          name:\n            row.name +\n            \" - \" +\n            row.ar[0].name +\n            \".\" +\n            res.data.data[0].type.toLowerCase(),\n        };\n        console.log(downloadMusicInfo);\n        this.$store.commit(\"updateDownloadMusicInfo\", downloadMusicInfo);\n      }\n    },\n  },\n  created() {\n    if (!this.$store.state.isLogin) {\n      this.$message.error(\"只有登录后才能进入每日推荐页面哦!\");\n      this.$router.replace(\"/discover\");\n    }\n  },\n  async mounted() {\n    if (this.$store.state.isLogin) {\n      await this.getRecommendMusic();\n      // 判断是否和上一次打开的歌单相同\n      if (this.recommendMusicListId == this.$store.state.musicListId) {\n        this.handleDOM(this.$store.state.musicId);\n      }\n    }\n  },\n  watch: {\n    \"$store.state.musicId\"(current, last) {\n      this.handleDOM(current, last);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.recommendInfo {\n  padding: 20px;\n}\n\n.title {\n  display: flex;\n}\n\n.cover {\n  width: 90px;\n}\n\n.cover img {\n  width: 100%;\n}\n\n.titleInfo {\n  padding: 15px 10px;\n}\n\n.infoTop {\n  font-size: 19px;\n  font-weight: bold;\n  color: black;\n  margin: 3px 0;\n}\n\n.infoBottom {\n  font-size: 12px;\n}\n\n.buttons {\n  margin: 8px 0 0 3px;\n  display: flex;\n}\n\n.buttonItem {\n  font-size: 12px;\n  padding: 8px 15px;\n  border: 1px solid #ddd;\n  border-radius: 20px;\n  transform: scale(0.9);\n}\n\n.buttonItem i {\n  font-size: 12px;\n  margin-right: 3px;\n  transform: scale(0.9);\n}\n\n.playAll {\n  background-color: #ec4141;\n  color: white;\n}\n\n.placeholder {\n  width: 100%;\n  height: 50px;\n}\n</style>"]}]}