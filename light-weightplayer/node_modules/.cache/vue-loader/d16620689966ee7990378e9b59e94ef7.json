{"remainingRequest":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_cloud_music-master\\light-webplayer\\src\\components\\registered\\Registered.vue?vue&type=style&index=0&id=4f12e4ef&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue_cloud_music-master\\light-webplayer\\src\\components\\registered\\Registered.vue","mtime":1632135031000},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636408356404},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636408358142},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\postcss-loader\\src\\index.js","mtime":1636408357193},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yZWdpc3RlcmVkQ29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLmxvZ28gewogIHdpZHRoOiA1MCU7Cn0KCi5sb2dvIGltZyB7CiAgd2lkdGg6IDEwMCU7Cn0KCi5mb3JtIHsKICB3aWR0aDogMTAwJTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5mb3JtIC5lbC1pbnB1dCAvZGVlcC8gaW5wdXQgewogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBtYXJnaW46IDEwcHggMDsKICBjb2xvcjogcmdiKDk1LCA5NSwgOTUpICFpbXBvcnRhbnQ7Cn0KCi5mb3JtIC5lbC1pbnB1dCAvZGVlcC9pbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7CiAgY29sb3I6ICNjY2MgIWltcG9ydGFudDsKICBmb250LXNpemU6IDEycHg7Cn0KCi5mb3JtIC5lbC1pbnB1dCAvZGVlcC8gLmVsLWlucHV0X19pY29uIHsKICBjb2xvcjogI2FhYTsKICB3aWR0aDogMTRweDsKICBoZWlnaHQ6IDEwNSU7Cn0KCi5mb3JtIC9kZWVwLyAuZWwtZm9ybS1pdGVtIHsKICBtYXJnaW46IDA7Cn0KCi5lbC1idXR0b24gewogIGJhY2tncm91bmQtY29sb3I6ICNlYTQ4NDg7CiAgY29sb3I6IHdoaXRlOwogIHdpZHRoOiA4MCU7CiAgYm9yZGVyOiBub25lOwogIGhlaWdodDogMzNweDsKICBtYXJnaW4tdG9wOiAyMHB4OwogIGJvcmRlci1yYWRpdXM6IDVweDsKfQoKLmVsLWJ1dHRvbjpob3ZlciB7CiAgY29sb3I6IHdoaXRlOwogIGJhY2tncm91bmQtY29sb3I6ICNmMDJlMmU7Cn0KCi5lbC1idXR0b246Zm9jdXMgewogIGNvbG9yOiB3aGl0ZTsKfQoKLnRpcCB7CiAgZm9udC1zaXplOiAxMnB4OwogIGNvbG9yOiAjYmJiOwogIGxpbmUtaGVpZ2h0OiAxMHB4OwogIHRyYW5zZm9ybTogc2NhbGUoMC45KSB0cmFuc2xhdGUoLTElLCAtMzAlKTsKfQoKLmNvZGVJbnB1dCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouY29kZUJ1dHRvbkNvbnRhaW5lciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHJpZ2h0OiA0OHB4OwogIHRvcDogMTRweDsKfQoKLmNvZGVCdXR0b24gewogIGJhY2tncm91bmQtY29sb3I6ICNlYTQ4NDg7CiAgY29sb3I6IHJnYigyNDUsIDI0NSwgMjQ1KTsKICBmb250LXNpemU6IDEycHg7CiAgcGFkZGluZzogNXB4IDEycHg7CiAgbGluZS1oZWlnaHQ6IDE1cHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIHRyYW5zZm9ybTogc2NhbGUoMC45KTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5jb2RlQnV0dG9uOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjAyZTJlOwp9CgouY291bnREb3duIHsKICBjb2xvcjogcmdiKDEzNCwgMTM0LCAxMzQpOwogIGxpbmUtaGVpZ2h0OiAyNXB4OwogIGZvbnQtc2l6ZTogMTJweDsKfQoKLmNvdW50RG93biBzcGFuIHsKICBtYXJnaW4tbGVmdDogMXB4Owp9Cg=="},{"version":3,"sources":["Registered.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkRA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Registered.vue","sourceRoot":"src/components/registered","sourcesContent":["<template>\n  <el-dialog\n    :visible=\"isDialogShow\"\n    custom-class=\"registeredDialog\"\n    width=\"400px\"\n    append-to-body\n    @close=\"closeRegistered\"\n  >\n    <div class=\"registeredContainer\">\n      <div class=\"logo\">\n        <img src=\"~assets/img/registered.png\" alt=\"\" />\n      </div>\n      <!-- 第一步 -->\n      <el-form class=\"form\" :model=\"userInfo\" v-if=\"currentStep == 0\">\n        <el-form-item>\n          <el-input\n            class=\"mobile\"\n            prefix-icon=\"el-icon-mobile-phone\"\n            size=\"small\"\n            placeholder=\"请输入手机号\"\n            v-model=\"userInfo.mobile\"\n          ></el-input></el-form-item\n        ><el-form-item>\n          <el-input\n            class=\"password\"\n            prefix-icon=\"el-icon-lock\"\n            size=\"small\"\n            placeholder=\"设置登录密码\"\n            type=\"password\"\n            v-model=\"userInfo.password\"\n          ></el-input>\n          <div class=\"tip\">\n            密码8~20位，至少包含字母/数组/字符2中组合\n          </div></el-form-item\n        >\n        <el-form-item>\n          <el-button\n            @click=\"submitCount\"\n            size=\"small\"\n            :loading=\"isButtonLoading\"\n            >注册</el-button\n          >\n        </el-form-item>\n      </el-form>\n      <!-- 第二步 -->\n      <el-form class=\"form\" v-else-if=\"currentStep == 1\">\n        <el-form-item class=\"codeInput\">\n          <el-input\n            class=\"mobile\"\n            prefix-icon=\"el-icon-key\"\n            size=\"small\"\n            placeholder=\"请填写验证码\"\n            v-model=\"code\"\n          ></el-input>\n          <div class=\"codeButtonContainer\">\n            <div class=\"codeButton\" v-if=\"!isCountDownShow\" @click=\"getCode\">\n              获取验证码\n            </div>\n            <div class=\"countDown\" v-else>{{ countDown }}<span>s</span></div>\n          </div>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"submitCode\" size=\"small\" :loading=\"isButtonLoading\"\n            >下一步</el-button\n          >\n        </el-form-item>\n      </el-form>\n      <!-- 第三步 -->\n      <el-form class=\"form\" v-else-if=\"currentStep == 2\">\n        <el-form-item>\n          <el-input\n            class=\"mobile\"\n            prefix-icon=\"el-icon-user\"\n            size=\"small\"\n            placeholder=\"请填写昵称\"\n            v-model=\"userInfo.nickname\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            @click=\"finishRegistered\"\n            size=\"small\"\n            :loading=\"isButtonLoading\"\n            >完成注册</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n// 倒计时的定时器名称\nlet timer;\n\nexport default {\n  name: \"Registered\",\n  props: {\n    isDialogShow: {\n      type: Boolean,\n      default() {\n        return false;\n      },\n    },\n  },\n  data() {\n    return {\n      // 当前注册的步骤索引\n      currentStep: 0,\n      // 用户信息\n      userInfo: {\n        mobile: \"\",\n        password: \"\",\n        nickname: \"\",\n      },\n      code: \"\",\n      //   按钮是否正在加载\n      isButtonLoading: false,\n      // 倒计时时长\n      countDown: 60,\n      //   是否显示倒计时\n      isCountDownShow: false,\n    };\n  },\n  methods: {\n    // 请求\n    //   发送验证码\n    async getCode() {\n      let getCode = await this.$request(\"/captcha/sent\", {\n        phone: this.userInfo.mobile,\n      });\n      console.log(getCode);\n\n      if (getCode.data.code == 200) {\n        //   开始倒计时\n        this.countDown = 60;\n        this.isCountDownShow = true;\n        timer = setInterval(() => {\n          if (this.countDown == 0) {\n            clearInterval(timer);\n            this.isCountDownShow = false;\n            return;\n          }\n          this.countDown--;\n        }, 1000);\n      } else {\n        this.$message.error(getCode.data.message);\n      }\n    },\n\n    // 点击注册的回调\n    async submitCount() {\n      console.log(\"注册\");\n      // 按钮设为加载状态\n      this.isButtonLoading = true;\n\n      if (\n        this.userInfo.password.length < 8 ||\n        this.userInfo.mobile.length != 11\n      ) {\n        this.$message.warning(\"手机号码或者密码格式错误!\");\n        this.isButtonLoading = false;\n        return;\n      }\n\n      // 先验证手机号是否已经存在\n      let verifyMobile = await this.$request(\"/cellphone/existence/check\", {\n        phone: this.userInfo.mobile,\n      });\n\n      console.log(verifyMobile);\n      // 如果手机号不存在 发送验证码\n      if (verifyMobile.data.exist !== 1) {\n        await this.getCode();\n        // 请求结束后按钮设为正常状态\n        this.isButtonLoading = false;\n        // 进入注册第二个步骤\n        this.currentStep = 1;\n      } else {\n        // 请求结束后按钮设为正常状态\n        this.isButtonLoading = false;\n        this.$message.warning(\"此手机号已经注册过了哦,请直接登录!\");\n        // 关闭当前注册框\n        this.$emit(\"closeRegistered\");\n      }\n    },\n\n    // 点击提交验证码的回调\n    async submitCode() {\n      console.log(\"验证验证码\");\n      // 按钮设为加载状态\n      this.isButtonLoading = true;\n\n      if (this.code.length != 4) {\n        this.isButtonLoading = false;\n        this.$message.warning(\"验证码格式错误!\");\n        return;\n      }\n\n      let verifyCode = await this.$request(\"/captcha/verify\", {\n        phone: this.userInfo.mobile,\n        captcha: this.code,\n      }).catch((err) => {\n        this.$message.error(err.response.data.message);\n\n        // 重置按钮状态\n        this.isButtonLoading = false;\n      });\n\n      if (!verifyCode) {\n        return;\n      }\n      // 请求结束后按钮设为正常状态\n      this.isButtonLoading = false;\n      console.log(verifyCode);\n      if (verifyCode.data.data) {\n        // 验证通过\n        // 进入注册第三个步骤   设置昵称\n        this.currentStep = 2;\n      }\n    },\n\n    // 点击完成注册的回调\n    async finishRegistered() {\n      // 按钮设为加载状态\n      this.isButtonLoading = true;\n      let res = await this.$request(\"/register/cellphone\", {\n        captcha: this.code,\n        phone: this.userInfo.mobile,\n        password: this.userInfo.password,\n        nickname: this.userInfo.nickname,\n      }).catch((err) => {\n        this.$message.error(err.response.data.message);\n\n        // 重置按钮状态\n        this.isButtonLoading = false;\n      });\n\n      if (!res) {\n        return;\n      }\n\n      // 请求结束后按钮设为正常状态\n      this.isButtonLoading = false;\n      console.log(res);\n      if (res.data.code == 200) {\n        this.$message.success(\"注册成功!\");\n        this.$emit(\"closeRegistered\");\n      } else {\n        this.$message.error(\"注册失败!\");\n      }\n    },\n\n    // 点击关闭注册框的回调\n    closeRegistered() {\n      // 重置所有数据\n      this.userInfo = {\n        mobile: \"\",\n        password: \"\",\n        nickname: \"\",\n      };\n      this.currentStep = 0;\n      this.code = \"\";\n      this.isButtonLoading = false;\n      this.isCountDownShow = false;\n      this.countDown = 60;\n\n      this.$emit(\"closeRegistered\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.registeredContainer {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.logo {\n  width: 50%;\n}\n\n.logo img {\n  width: 100%;\n}\n\n.form {\n  width: 100%;\n  text-align: center;\n}\n\n.form .el-input /deep/ input {\n  background-color: white !important;\n  border: 1px solid #ccc;\n  margin: 10px 0;\n  color: rgb(95, 95, 95) !important;\n}\n\n.form .el-input /deep/input::-webkit-input-placeholder {\n  color: #ccc !important;\n  font-size: 12px;\n}\n\n.form .el-input /deep/ .el-input__icon {\n  color: #aaa;\n  width: 14px;\n  height: 105%;\n}\n\n.form /deep/ .el-form-item {\n  margin: 0;\n}\n\n.el-button {\n  background-color: #ea4848;\n  color: white;\n  width: 80%;\n  border: none;\n  height: 33px;\n  margin-top: 20px;\n  border-radius: 5px;\n}\n\n.el-button:hover {\n  color: white;\n  background-color: #f02e2e;\n}\n\n.el-button:focus {\n  color: white;\n}\n\n.tip {\n  font-size: 12px;\n  color: #bbb;\n  line-height: 10px;\n  transform: scale(0.9) translate(-1%, -30%);\n}\n\n.codeInput {\n  position: relative;\n}\n\n.codeButtonContainer {\n  position: absolute;\n  right: 48px;\n  top: 14px;\n}\n\n.codeButton {\n  background-color: #ea4848;\n  color: rgb(245, 245, 245);\n  font-size: 12px;\n  padding: 5px 12px;\n  line-height: 15px;\n  border-radius: 5px;\n  transform: scale(0.9);\n  cursor: pointer;\n}\n\n.codeButton:hover {\n  background-color: #f02e2e;\n}\n\n.countDown {\n  color: rgb(134, 134, 134);\n  line-height: 25px;\n  font-size: 12px;\n}\n\n.countDown span {\n  margin-left: 1px;\n}\n</style>\n"]}]}