{"remainingRequest":"C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\src\\components\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\src\\components\\login\\Login.vue","mtime":1636485287760},{"path":"C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1636408357214},{"path":"C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"C:\\Users\\w9747\\Downloads\\vue_cloud_music-master\\vue_cloud_music-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3c5NzQ3L0Rvd25sb2Fkcy92dWVfY2xvdWRfbXVzaWMtbWFzdGVyL3Z1ZV9jbG91ZF9tdXNpYy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbkZvcm06IHsKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgcGhvbmVOdW06ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDkuovku7YKICAgIC8vIOeCueWHu+eZu+W9leaMiemSrueahOWbnuiwgwogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB0aGlzLmxvZ2luQnlDZWxscGhvbmUoKTsKICAgIH0sCiAgICAvLyAgIOaJi+acuueZu+W9leivt+axggogICAgbG9naW5CeUNlbGxwaG9uZTogZnVuY3Rpb24gbG9naW5CeUNlbGxwaG9uZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRpbWVzdGFtcCwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IERhdGUucGFyc2UobmV3IERhdGUoKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kcmVxdWVzdCgiL2xvZ2luL2NlbGxwaG9uZSIsIHsKICAgICAgICAgICAgICAgICAgcGhvbmU6IF90aGlzLmxvZ2luRm9ybS5waG9uZU51bSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLmxvZ2luRm9ybS5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmRhdGEuY29kZSA9PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g5bCG6K+35rGC5Yiw55qE55So5oi3aWTlrZjlhaVsb2NhbHN0b3JhZ2UKICAgICAgICAgICAgICAgIC8vIOWcqGluZGV4LnZ1ZSDlkowgYm90dG9tQ29udHJvbC52dWXkuK3nlKjliLDov4cKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcklkIiwgcmVzdWx0LmRhdGEucHJvZmlsZS51c2VySWQpOyAvLyB0aGlzLnVzZXJJbmZvID0gcmVzdWx0LmRhdGEucHJvZmlsZTsKICAgICAgICAgICAgICAgIC8vIOWwhnVzZXJJbmZv5Lyg5Zue54i257uE5Lu2CgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoImdldFVzZXJJbmZvIiwgcmVzdWx0LmRhdGEucHJvZmlsZSk7CgogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi55m75b2V5oiQ5YqfISIpOyAvLyDliLfmlrDpobXpnaIKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgICAgIC8vIOS/ruaUuXZ1ZXjkuK3nmoTnmbvlvZXnirbmgIEKCgogICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRhTG9naW5TdGF0ZSIsIHRydWUpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmRhdGEuY29kZSA9PSA0MDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g5omL5py65Y+36ZSZ6K+vCiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi5omL5py65Y+36ZSZ6K+vISIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmRhdGEuY29kZSA9PSA1MDIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g5a+G56CB6ZSZ6K+vCiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi5a+G56CB6ZSZ6K+vISIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgLy8g55m75b2V5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VCiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi55m75b2V5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VISIpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgLy8g5riF56m66L6T5YWl5qGG55qE5YaF5a65CiAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPSAiIjsKICAgICAgICAgICAgICAgIF90aGlzLmxvZ2luRm9ybS5waG9uZU51bSA9ICIiOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA;AADA,KAAA;AAMA,GATA;AAUA,EAAA,OAAA,EAAA;AACA;AACA;AACA,IAAA,KAHA,mBAGA;AACA,WAAA,gBAAA;AACA,KALA;AAOA;AACA,IAAA,gBARA,8BAQA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,SADA,GACA,IAAA,CAAA,KAAA,CAAA,IAAA,IAAA,EAAA,CADA;AAAA;AAAA,uBAEA,KAAA,CAAA,QAAA,CAAA,kBAAA,EAAA;AACA,kBAAA,KAAA,EAAA,KAAA,CAAA,SAAA,CAAA,QADA;AAEA,kBAAA,QAAA,EAAA,KAAA,CAAA,SAAA,CAAA,QAFA;AAGA,kBAAA,eAAA,EAAA,IAHA;AAIA,kBAAA,SAAA,EAAA;AAJA,iBAAA,CAFA;;AAAA;AAEA,gBAAA,MAFA;;AAAA,sBAUA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAVA;AAAA;AAAA;AAAA;;AAWA;AACA;AACA,gBAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,EAbA,CAcA;AACA;;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,MAAA,CAAA,IAAA,CAAA,OAAA;;AAEA,gBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA,EAlBA,CAmBA;AACA;AACA;;;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,IAAA;;AAtBA;AAAA;;AAAA;AAAA,sBAuBA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAvBA;AAAA;AAAA;AAAA;;AAwBA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA;;AAzBA;;AAAA;AAAA,sBA2BA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GA3BA;AAAA;AAAA;AAAA;;AA4BA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA;;AA7BA;;AAAA;AAgCA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,aAAA;;AAjCA;;AAAA;AAqCA;AACA,gBAAA,KAAA,CAAA,SAAA,CAAA,QAAA,GAAA,EAAA;AACA,gBAAA,KAAA,CAAA,SAAA,CAAA,QAAA,GAAA,EAAA;;AAvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwCA;AAhDA;AAVA,CAAA","sourcesContent":["<template>\n  <div class=\"Login\">\n    <el-form\n      ref=\"form\"\n      v-model=\"loginForm\"\n      label-width=\"80px\"\n      label-position=\"right\"\n      size=\"mini\"\n    >\n      <el-form-item label=\"手机号码：\" size=\"mini\" label-width=\"100px\" required>\n        <input type=\"text\" v-model=\"loginForm.phoneNum\" class=\"loginInput\" />\n      </el-form-item>\n      <el-form-item label=\"密码：\" size=\"mini\" label-width=\"100px\" required>\n        <input\n          type=\"password\"\n          v-model=\"loginForm.password\"\n          class=\"loginInput\"\n        />\n      </el-form-item>\n      <div class=\"loginButton\">\n        <el-button type=\"danger\" @click=\"login\" size=\"mini\">登录</el-button>\n      </div>\n      <div class=\"regEnter\" @click=\"isRegisteredShow = true\">注册</div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loginForm: {\n        password: \"\",\n        phoneNum: \"\",\n      },\n    };\n  },\n  methods: {\n    // 事件\n    // 点击登录按钮的回调\n    login() {\n      this.loginByCellphone();\n    },\n\n    //   手机登录请求\n    async loginByCellphone() {\n      let timestamp = Date.parse(new Date());\n      let result = await this.$request(\"/login/cellphone\", {\n        phone: this.loginForm.phoneNum,\n        password: this.loginForm.password,\n        withCredentials: true,\n        timestamp,\n      });\n      // console.log(result);\n      // 登录成功\n      if (result.data.code == 200) {\n        // 将请求到的用户id存入localstorage\n        // 在index.vue 和 bottomControl.vue中用到过\n        window.localStorage.setItem(\"userId\", result.data.profile.userId);\n        // this.userInfo = result.data.profile;\n        // 将userInfo传回父组件\n        this.$emit(\"getUserInfo\", result.data.profile);\n\n        this.$message.success(\"登录成功!\");\n        // 刷新页面\n        // this.$router.go(0);\n        // 修改vuex中的登录状态\n        this.$store.commit(\"updataLoginState\", true);\n      } else if (result.data.code == 400) {\n        // 手机号错误\n        this.$message.error(\"手机号错误!\");\n        return;\n      } else if (result.data.code == 502) {\n        // 密码错误\n        this.$message.error(\"密码错误!\");\n        return;\n      } else {\n        // 登录失败，请稍后重试\n        this.$message.error(\"登录失败，请稍后重试!\");\n        return;\n      }\n\n      // 清空输入框的内容\n      this.loginForm.password = \"\";\n      this.loginForm.phoneNum = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.regEnter {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  cursor: pointer;\n  margin: 15px auto 0;\n}\n\n.regEnter:hover {\n  text-decoration: underline;\n}\n\n.loginInput {\n  height: 25px;\n  border-radius: 5px;\n  outline: none;\n  border: 1px solid #999;\n  padding-left: 5px;\n  width: 175px;\n}\n\n.el-form {\n  padding-top: 10px;\n}\n\n.loginButton {\n  width: 100%;\n  text-align: center;\n}\n\n.loginButton .el-button {\n  width: 200px;\n}\n</style>\n"],"sourceRoot":"src/components/login"}]}