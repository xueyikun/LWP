{"remainingRequest":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_cloud_music-master\\light-webplayer\\src\\components\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_cloud_music-master\\light-webplayer\\src\\components\\login\\Login.vue","mtime":1636485287760},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\babel-loader\\lib\\index.js","mtime":1636408357214},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636408355875},{"path":"D:\\vue_cloud_music-master\\light-webplayer\\node_modules\\vue-loader\\lib\\index.js","mtime":1636408357599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3Z1ZV9jbG91ZF9tdXNpYy1tYXN0ZXIvbGlnaHQtd2VicGxheWVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIHBob25lTnVtOiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5LqL5Lu2CiAgICAvLyDngrnlh7vnmbvlvZXmjInpkq7nmoTlm57osIMKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdGhpcy5sb2dpbkJ5Q2VsbHBob25lKCk7CiAgICB9LAogICAgLy8gICDmiYvmnLrnmbvlvZXor7fmsYIKICAgIGxvZ2luQnlDZWxscGhvbmU6IGZ1bmN0aW9uIGxvZ2luQnlDZWxscGhvbmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB0aW1lc3RhbXAsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHJlcXVlc3QoIi9sb2dpbi9jZWxscGhvbmUiLCB7CiAgICAgICAgICAgICAgICAgIHBob25lOiBfdGhpcy5sb2dpbkZvcm0ucGhvbmVOdW0sCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdC5kYXRhLmNvZGUgPT0gMjAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOWwhuivt+axguWIsOeahOeUqOaIt2lk5a2Y5YWlbG9jYWxzdG9yYWdlCiAgICAgICAgICAgICAgICAvLyDlnKhpbmRleC52dWUg5ZKMIGJvdHRvbUNvbnRyb2wudnVl5Lit55So5Yiw6L+HCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJZCIsIHJlc3VsdC5kYXRhLnByb2ZpbGUudXNlcklkKTsgLy8gdGhpcy51c2VySW5mbyA9IHJlc3VsdC5kYXRhLnByb2ZpbGU7CiAgICAgICAgICAgICAgICAvLyDlsIZ1c2VySW5mb+S8oOWbnueItue7hOS7tgoKICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCJnZXRVc2VySW5mbyIsIHJlc3VsdC5kYXRhLnByb2ZpbGUpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIueZu+W9leaIkOWKnyEiKTsgLy8g5Yi35paw6aG16Z2iCiAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgICAgICAgICAvLyDkv67mlLl2dWV45Lit55qE55m75b2V54q25oCBCgoKICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInVwZGF0YUxvZ2luU3RhdGUiLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdC5kYXRhLmNvZGUgPT0gNDAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOaJi+acuuWPt+mUmeivrwogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoIuaJi+acuuWPt+mUmeivryEiKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdC5kYXRhLmNvZGUgPT0gNTAyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOWvhueggemUmeivrwogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoIuWvhueggemUmeivryEiKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIC8vIOeZu+W9leWksei0pe+8jOivt+eojeWQjumHjeivlQogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoIueZu+W9leWksei0pe+8jOivt+eojeWQjumHjeivlSEiKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIC8vIOa4heepuui+k+WFpeahhueahOWGheWuuQogICAgICAgICAgICAgICAgX3RoaXMubG9naW5Gb3JtLnBhc3N3b3JkID0gIiI7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbkZvcm0ucGhvbmVOdW0gPSAiIjsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA;AADA,KAAA;AAMA,GATA;AAUA,EAAA,OAAA,EAAA;AACA;AACA;AACA,IAAA,KAHA,mBAGA;AACA,WAAA,gBAAA;AACA,KALA;AAOA;AACA,IAAA,gBARA,8BAQA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,SADA,GACA,IAAA,CAAA,KAAA,CAAA,IAAA,IAAA,EAAA,CADA;AAAA;AAAA,uBAEA,KAAA,CAAA,QAAA,CAAA,kBAAA,EAAA;AACA,kBAAA,KAAA,EAAA,KAAA,CAAA,SAAA,CAAA,QADA;AAEA,kBAAA,QAAA,EAAA,KAAA,CAAA,SAAA,CAAA,QAFA;AAGA,kBAAA,eAAA,EAAA,IAHA;AAIA,kBAAA,SAAA,EAAA;AAJA,iBAAA,CAFA;;AAAA;AAEA,gBAAA,MAFA;;AAAA,sBAUA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAVA;AAAA;AAAA;AAAA;;AAWA;AACA;AACA,gBAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,EAbA,CAcA;AACA;;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,MAAA,CAAA,IAAA,CAAA,OAAA;;AAEA,gBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA,EAlBA,CAmBA;AACA;AACA;;;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,IAAA;;AAtBA;AAAA;;AAAA;AAAA,sBAuBA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAvBA;AAAA;AAAA;AAAA;;AAwBA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA;;AAzBA;;AAAA;AAAA,sBA2BA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GA3BA;AAAA;AAAA;AAAA;;AA4BA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA;;AA7BA;;AAAA;AAgCA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,aAAA;;AAjCA;;AAAA;AAqCA;AACA,gBAAA,KAAA,CAAA,SAAA,CAAA,QAAA,GAAA,EAAA;AACA,gBAAA,KAAA,CAAA,SAAA,CAAA,QAAA,GAAA,EAAA;;AAvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwCA;AAhDA;AAVA,CAAA","sourcesContent":["<template>\n  <div class=\"Login\">\n    <el-form\n      ref=\"form\"\n      v-model=\"loginForm\"\n      label-width=\"80px\"\n      label-position=\"right\"\n      size=\"mini\"\n    >\n      <el-form-item label=\"手机号码：\" size=\"mini\" label-width=\"100px\" required>\n        <input type=\"text\" v-model=\"loginForm.phoneNum\" class=\"loginInput\" />\n      </el-form-item>\n      <el-form-item label=\"密码：\" size=\"mini\" label-width=\"100px\" required>\n        <input\n          type=\"password\"\n          v-model=\"loginForm.password\"\n          class=\"loginInput\"\n        />\n      </el-form-item>\n      <div class=\"loginButton\">\n        <el-button type=\"danger\" @click=\"login\" size=\"mini\">登录</el-button>\n      </div>\n      <div class=\"regEnter\" @click=\"isRegisteredShow = true\">注册</div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loginForm: {\n        password: \"\",\n        phoneNum: \"\",\n      },\n    };\n  },\n  methods: {\n    // 事件\n    // 点击登录按钮的回调\n    login() {\n      this.loginByCellphone();\n    },\n\n    //   手机登录请求\n    async loginByCellphone() {\n      let timestamp = Date.parse(new Date());\n      let result = await this.$request(\"/login/cellphone\", {\n        phone: this.loginForm.phoneNum,\n        password: this.loginForm.password,\n        withCredentials: true,\n        timestamp,\n      });\n      // console.log(result);\n      // 登录成功\n      if (result.data.code == 200) {\n        // 将请求到的用户id存入localstorage\n        // 在index.vue 和 bottomControl.vue中用到过\n        window.localStorage.setItem(\"userId\", result.data.profile.userId);\n        // this.userInfo = result.data.profile;\n        // 将userInfo传回父组件\n        this.$emit(\"getUserInfo\", result.data.profile);\n\n        this.$message.success(\"登录成功!\");\n        // 刷新页面\n        // this.$router.go(0);\n        // 修改vuex中的登录状态\n        this.$store.commit(\"updataLoginState\", true);\n      } else if (result.data.code == 400) {\n        // 手机号错误\n        this.$message.error(\"手机号错误!\");\n        return;\n      } else if (result.data.code == 502) {\n        // 密码错误\n        this.$message.error(\"密码错误!\");\n        return;\n      } else {\n        // 登录失败，请稍后重试\n        this.$message.error(\"登录失败，请稍后重试!\");\n        return;\n      }\n\n      // 清空输入框的内容\n      this.loginForm.password = \"\";\n      this.loginForm.phoneNum = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.regEnter {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  cursor: pointer;\n  margin: 15px auto 0;\n}\n\n.regEnter:hover {\n  text-decoration: underline;\n}\n\n.loginInput {\n  height: 25px;\n  border-radius: 5px;\n  outline: none;\n  border: 1px solid #999;\n  padding-left: 5px;\n  width: 175px;\n}\n\n.el-form {\n  padding-top: 10px;\n}\n\n.loginButton {\n  width: 100%;\n  text-align: center;\n}\n\n.loginButton .el-button {\n  width: 200px;\n}\n</style>\n"],"sourceRoot":"src/components/login"}]}